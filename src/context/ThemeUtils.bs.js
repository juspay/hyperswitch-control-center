// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Core__JSON from "@rescript/core/src/Core__JSON.bs.js";
import * as LogicUtils from "../utils/LogicUtils.bs.js";
import * as Core__Option from "@rescript/core/src/Core__Option.bs.js";
import * as HandlingEvents from "../components/HandlingEvents.bs.js";

function useThemeFromEvent() {
  var match = React.useState(function () {});
  var setEventTheme = match[1];
  React.useEffect(function () {
    var handleEventMessage = function (ev) {
      var optionalDict = HandlingEvents.getEventDict(ev);
      if (optionalDict === undefined) {
        return;
      }
      var optionalEventName = Core__Option.flatMap(
        optionalDict["eventType"],
        function (obj) {
          return Core__JSON.Decode.string(obj);
        },
      );
      if (optionalEventName !== undefined) {
        if (optionalEventName === "AuthenticationDetails") {
          var payloadDict = Core__Option.flatMap(
            optionalDict["payload"],
            function (obj) {
              return Core__JSON.Decode.object(obj);
            },
          );
          var theme = Core__Option.mapOr(payloadDict, "", function (finalDict) {
            return LogicUtils.getString(finalDict, "theme", "");
          });
          return setEventTheme(function (param) {
            return theme;
          });
        }
        if (optionalEventName === "themeToggle") {
          var theme$1 = LogicUtils.getString(optionalDict, "payload", "");
          return setEventTheme(function (param) {
            return theme$1;
          });
        }
        console.log("Event name is " + optionalEventName, optionalDict);
        return;
      } else {
        console.log("Event Data is not found", optionalDict);
        return;
      }
    };
    window.addEventListener("message", handleEventMessage);
    return function () {
      window.removeEventListener("message", handleEventMessage);
    };
  }, []);
  return match[0];
}

export { useThemeFromEvent };
/* react Not a pure module */
