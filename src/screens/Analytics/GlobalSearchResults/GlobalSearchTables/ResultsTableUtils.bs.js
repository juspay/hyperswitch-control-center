// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Js_exn from "rescript/lib/es6/js_exn.js";
import * as APIUtils from "../../../APIUtils/APIUtils.bs.js";
import * as LogicUtils from "../../../../utils/LogicUtils.bs.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as HSwitchUtils from "../../../HSwitchUtils.bs.js";
import * as CommonAuthUtils from "../../../../entryPoints/AuthModule/Common/CommonAuthUtils.bs.js";
import * as Caml_js_exceptions from "rescript/lib/es6/caml_js_exceptions.js";

function useGetData() {
  var body = {};
  var merchantDetailsValue = HSwitchUtils.useMerchantDetailsValue();
  var getURL = APIUtils.useGetURL();
  return async function (updateDetails, offset, query, path) {
    body["offset"] = offset;
    body["count"] = 10;
    body["query"] = query;
    if (CommonAuthUtils.isValidEmail(query)) {
      body["query"] = query;
    } else {
      var filters = [["customer_email", [query]]];
      body["filters"] = LogicUtils.getJsonFromArrayOfJson(filters);
      body["query"] = merchantDetailsValue.merchant_id;
    }
    try {
      var url = getURL(
        "GLOBAL_SEARCH",
        "Post",
        Caml_option.some(path),
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
      var res = await updateDetails(
        url,
        body,
        "Post",
        undefined,
        undefined,
        undefined,
        undefined,
      );
      var data = LogicUtils.getArrayFromDict(
        LogicUtils.getDictFromJsonObject(res),
        "hits",
        [],
      );
      var total = LogicUtils.getInt(
        LogicUtils.getDictFromJsonObject(res),
        "count",
        0,
      );
      return [data, total];
    } catch (raw_exn) {
      var exn = Caml_js_exceptions.internalToOCamlException(raw_exn);
      if (exn.RE_EXN_ID === Js_exn.$$Error) {
        return Js_exn.raiseError("Something went wrong!");
      }
      throw exn;
    }
  };
}

var tableBorderClass =
  "border-collapse border border-jp-gray-940 border-solid border-2 border-opacity-30 dark:border-jp-gray-dark_table_border_color dark:border-opacity-30";

export { tableBorderClass, useGetData };
/* APIUtils Not a pure module */
