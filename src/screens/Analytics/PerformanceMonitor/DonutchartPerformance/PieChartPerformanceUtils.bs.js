// Generated by ReScript, PLEASE EDIT WITH CARE

import * as LogicUtils from "../../../../utils/LogicUtils.bs.js";
import * as Core__Option from "@rescript/core/src/Core__Option.bs.js";
import * as PerformanceUtils from "../PerformanceUtils.bs.js";

function getDontchartOptions(config, series) {
  return {
    chart: {
      type: "pie",
    },
    title: {
      text: config.title.text,
    },
    tooltip: {
      valueSuffix: "",
    },
    subtitle: {
      text: "",
    },
    plotOptions: {
      pie: {
        allowPointSelect: true,
        cursor: "pointer",
        dataLabels: {
          enabled: true,
          distance: -15,
          format: "{point.percentage:.0f}%",
        },
        showInLegend: true,
      },
    },
    series: [
      {
        name: "failure",
        colorByPoint: true,
        innerSize: "75%",
        data: series,
      },
    ],
  };
}

function getPieCharData(array, config) {
  var grouped = PerformanceUtils.getGroupByDataForStatusAndPaymentCount(
    array,
    config.groupByKeys,
  );
  var keys = Object.keys(grouped);
  return keys.map(function (val) {
    var dict = Core__Option.getOr(grouped[val], {});
    return {
      name: val,
      y: LogicUtils.getInt(dict, "failure", 0),
    };
  });
}

export { getDontchartOptions, getPieCharData };
/* LogicUtils Not a pure module */
