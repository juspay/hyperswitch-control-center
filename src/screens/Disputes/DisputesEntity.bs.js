// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Table from "../../components/Table.bs.js";
import * as React from "react";
import * as EntityType from "../../entities/EntityType.bs.js";
import * as GlobalVars from "../../utils/GlobalVars.bs.js";
import * as LogicUtils from "../../utils/LogicUtils.bs.js";
import * as DisputesUtils from "./DisputesUtils.bs.js";
import * as ThemeProvider from "../../context/ThemeProvider.bs.js";
import * as HelperComponents from "../Helpers/HelperComponents.bs.js";

var defaultColumns = [
  "DisputeId",
  "Amount",
  "DisputeStage",
  "DisputeStatus",
  "PaymentId",
  "CreatedAt",
];

var columnsInPaymentPage = [
  "DisputeId",
  "DisputeStage",
  "ConnectorReason",
  "DisputeStatus",
  "CreatedAt",
];

var allColumns = [
  "Amount",
  "AttemptId",
  "ChallengeRequiredBy",
  "Connector",
  "ConnectorCreatedAt",
  "ConnectorDisputeId",
  "ConnectorReason",
  "ConnectorReasonCode",
  "ConnectorStatus",
  "ConnectorUpdatedAt",
  "CreatedAt",
  "Currency",
  "DisputeId",
  "DisputeStage",
  "DisputeStatus",
  "PaymentId",
];

function useGetStatus(dispute) {
  var match = React.useContext(ThemeProvider.themeContext);
  var backgroundColor = match.globalUIConfig.backgroundColor;
  var orderStatusLabel = dispute.dispute_status.toUpperCase();
  var fixedCss = "text-sm text-white font-bold p-1.5 rounded-lg";
  var match$1 = DisputesUtils.disputeStatusVariantMapper(
    dispute.dispute_status,
  );
  var exit = 0;
  if (typeof match$1 === "object") {
    return React.createElement(
      "div",
      {
        className: fixedCss + " " + backgroundColor + " bg-opacity-50",
      },
      orderStatusLabel,
    );
  }
  switch (match$1) {
    case "DisputeAccepted":
    case "DisputeWon":
      exit = 1;
      break;
    case "DisputeExpired":
    case "DisputeLost":
      exit = 2;
      break;
    default:
      return React.createElement(
        "div",
        {
          className: fixedCss + " " + backgroundColor + " bg-opacity-50",
        },
        orderStatusLabel,
      );
  }
  switch (exit) {
    case 1:
      return React.createElement(
        "div",
        {
          className: fixedCss + " bg-hyperswitch_green dark:bg-opacity-50",
        },
        orderStatusLabel,
      );
    case 2:
      return React.createElement(
        "div",
        {
          className: fixedCss + " bg-red-960 dark:bg-opacity-50",
        },
        orderStatusLabel,
      );
  }
}

function getHeading(colType) {
  switch (colType) {
    case "DisputeId":
      return Table.makeHeaderInfo(
        "dispute_id",
        "Dispute Id",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "PaymentId":
      return Table.makeHeaderInfo(
        "payment_id",
        "Payment Id",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "AttemptId":
      return Table.makeHeaderInfo(
        "attempt_id",
        "Attempt Id",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "Amount":
      return Table.makeHeaderInfo(
        "amount",
        "Amount",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "Currency":
      return Table.makeHeaderInfo(
        "currency",
        "Currency",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "DisputeStage":
      return Table.makeHeaderInfo(
        "dispute_stage",
        "Dispute Stage",
        "DropDown",
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "DisputeStatus":
      return Table.makeHeaderInfo(
        "dispute_status",
        "Dispute Status",
        "DropDown",
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "Connector":
      return Table.makeHeaderInfo(
        "connector",
        "Connector",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ConnectorStatus":
      return Table.makeHeaderInfo(
        "connector_status",
        "Connector Status",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ConnectorDisputeId":
      return Table.makeHeaderInfo(
        "connector_dispute_id",
        "Connector Dispute Id",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ConnectorReason":
      return Table.makeHeaderInfo(
        "connector_reason",
        "Connector Reason",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ConnectorReasonCode":
      return Table.makeHeaderInfo(
        "connector_reason_code",
        "Connector Reason Code",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ChallengeRequiredBy":
      return Table.makeHeaderInfo(
        "connector_required_by",
        "Connector Required By",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ConnectorCreatedAt":
      return Table.makeHeaderInfo(
        "connector_created_at",
        "Connector Created ",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ConnectorUpdatedAt":
      return Table.makeHeaderInfo(
        "connector_updated_at",
        "Connector Updated ",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "CreatedAt":
      return Table.makeHeaderInfo(
        "created_at",
        "Created",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
  }
}

function amountValue(amount, currency) {
  var amountInFloat = Number(amount) / 100.0;
  return amountInFloat.toString() + " " + currency;
}

function getCell(disputesData, colType) {
  switch (colType) {
    case "DisputeId":
      return {
        TAG: "DisplayCopyCell",
        _0: disputesData.dispute_id,
      };
    case "PaymentId":
      return {
        TAG: "DisplayCopyCell",
        _0: disputesData.payment_id,
      };
    case "AttemptId":
      return {
        TAG: "DisplayCopyCell",
        _0: disputesData.attempt_id,
      };
    case "Amount":
      return {
        TAG: "Text",
        _0: amountValue(disputesData.amount, disputesData.currency),
      };
    case "Currency":
      return {
        TAG: "Text",
        _0: disputesData.currency,
      };
    case "DisputeStage":
      var match = DisputesUtils.disputeStageVariantMapper(
        disputesData.dispute_stage,
      );
      var tmp;
      switch (match) {
        case "PreDispute":
          tmp = "LabelOrange";
          break;
        case "Dispute":
          tmp = "LabelGreen";
          break;
        case "PreArbitration":
          tmp = "LabelYellow";
          break;
        case "NotFound":
          tmp = "LabelWhite";
          break;
      }
      return {
        TAG: "Label",
        _0: {
          title: disputesData.dispute_stage.toUpperCase(),
          color: tmp,
        },
      };
    case "DisputeStatus":
      var match$1 = DisputesUtils.disputeStatusVariantMapper(
        disputesData.dispute_status,
      );
      var tmp$1;
      if (typeof match$1 !== "object") {
        switch (match$1) {
          case "DisputeOpened":
            tmp$1 = "LabelLightBlue";
            break;
          case "DisputeCancelled":
            tmp$1 = "LabelOrange";
            break;
          case "DisputeChallenged":
            tmp$1 = "LabelYellow";
            break;
          case "DisputeAccepted":
          case "DisputeWon":
            tmp$1 = "LabelGreen";
            break;
          case "DisputeExpired":
          case "DisputeLost":
            tmp$1 = "LabelRed";
            break;
        }
      } else {
        tmp$1 = "LabelWhite";
      }
      return {
        TAG: "Label",
        _0: {
          title: disputesData.dispute_status.toUpperCase(),
          color: tmp$1,
        },
      };
    case "Connector":
      return {
        TAG: "CustomCell",
        _0: React.createElement(HelperComponents.ConnectorCustomCell.make, {
          connectorName: disputesData.connector,
        }),
        _1: "",
      };
    case "ConnectorStatus":
      return {
        TAG: "Text",
        _0: disputesData.connector_status,
      };
    case "ConnectorDisputeId":
      return {
        TAG: "Text",
        _0: disputesData.connector_dispute_id,
      };
    case "ConnectorReason":
      return {
        TAG: "Text",
        _0: disputesData.connector_reason,
      };
    case "ConnectorReasonCode":
      return {
        TAG: "Text",
        _0: disputesData.connector_reason_code,
      };
    case "ChallengeRequiredBy":
      return {
        TAG: "Date",
        _0: disputesData.challenge_required_by,
      };
    case "ConnectorCreatedAt":
      return {
        TAG: "Date",
        _0: disputesData.connector_created_at,
      };
    case "ConnectorUpdatedAt":
      return {
        TAG: "Date",
        _0: disputesData.connector_updated_at,
      };
    case "CreatedAt":
      return {
        TAG: "Date",
        _0: disputesData.created_at,
      };
  }
}

function itemToObjMapper(dict) {
  return {
    dispute_id: LogicUtils.getString(dict, "dispute_id", ""),
    payment_id: LogicUtils.getString(dict, "payment_id", ""),
    attempt_id: LogicUtils.getString(dict, "attempt_id", ""),
    amount: LogicUtils.getString(dict, "amount", ""),
    currency: LogicUtils.getString(dict, "currency", ""),
    dispute_stage: LogicUtils.getString(dict, "dispute_stage", ""),
    dispute_status: LogicUtils.getString(dict, "dispute_status", ""),
    connector: LogicUtils.getString(dict, "connector", ""),
    connector_status: LogicUtils.getString(dict, "connector_status", ""),
    connector_dispute_id: LogicUtils.getString(
      dict,
      "connector_dispute_id",
      "",
    ),
    connector_reason: LogicUtils.getString(dict, "connector_reason", ""),
    connector_reason_code: LogicUtils.getString(
      dict,
      "connector_reason_code",
      "",
    ),
    challenge_required_by: LogicUtils.getString(
      dict,
      "challenge_required_by",
      "",
    ),
    connector_created_at: LogicUtils.getString(
      dict,
      "connector_created_at",
      "",
    ),
    connector_updated_at: LogicUtils.getString(
      dict,
      "connector_updated_at",
      "",
    ),
    created_at: LogicUtils.getString(dict, "created_at", ""),
  };
}

function getDisputes(json) {
  return LogicUtils.getArrayDataFromJson(json, itemToObjMapper);
}

var disputesEntity = EntityType.makeEntity(
  "",
  getDisputes,
  defaultColumns,
  allColumns,
  getHeading,
  getCell,
  "",
  undefined,
  undefined,
  undefined,
  undefined,
  function (disputesData) {
    return GlobalVars.appendDashboardPath(
      "/disputes/" + disputesData.dispute_id,
    );
  },
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
  undefined,
);

export {
  defaultColumns,
  columnsInPaymentPage,
  allColumns,
  useGetStatus,
  getHeading,
  amountValue,
  getCell,
  itemToObjMapper,
  getDisputes,
  disputesEntity,
};
/* disputesEntity Not a pure module */
