// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Table from "../../components/Table.bs.js";
import * as React from "react";
import * as EntityType from "../../entities/EntityType.bs.js";
import * as GlobalVars from "../../utils/GlobalVars.bs.js";
import * as LogicUtils from "../../utils/LogicUtils.bs.js";
import * as RoutingUtils from "./RoutingUtils.bs.js";
import * as PermissionUtils from "../UserManagement/PermissionUtils.bs.js";
import * as HelperComponents from "../Helpers/HelperComponents.bs.js";

var allColumns = [
  "Name",
  "Type",
  "ProfileId",
  "ProfileName",
  "Description",
  "Created",
  "LastUpdated",
  "Status",
];

function itemToObjMapper(dict) {
  return {
    id: LogicUtils.getString(dict, "id", ""),
    name: LogicUtils.getString(dict, "name", ""),
    profile_id: LogicUtils.getString(dict, "profile_id", ""),
    kind: LogicUtils.getString(dict, "kind", ""),
    description: LogicUtils.getString(dict, "description", ""),
    modified_at: LogicUtils.getString(dict, "modified_at", ""),
    created_at: LogicUtils.getString(dict, "created_at", ""),
  };
}

var defaultColumns = [
  "Name",
  "ProfileId",
  "ProfileName",
  "Type",
  "Description",
  "Status",
];

function getHeading(colType) {
  switch (colType) {
    case "Name":
      return Table.makeHeaderInfo(
        "name",
        "Name of Control",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "Type":
      return Table.makeHeaderInfo(
        "kind",
        "Type of Control",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ProfileId":
      return Table.makeHeaderInfo(
        "profile_id",
        "Profile ID",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "ProfileName":
      return Table.makeHeaderInfo(
        "profile_name",
        "Profile Name",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "Description":
      return Table.makeHeaderInfo(
        "description",
        "Description",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "Created":
      return Table.makeHeaderInfo(
        "created_at",
        "Created",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "LastUpdated":
      return Table.makeHeaderInfo(
        "modified_at",
        "Last Updated",
        undefined,
        true,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
    case "Status":
      return Table.makeHeaderInfo(
        "status",
        "Status",
        "DropDown",
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
      );
  }
}

function getTableCell(activeRoutingIds) {
  return function (historyData, colType) {
    switch (colType) {
      case "Name":
        return {
          TAG: "Text",
          _0: historyData.name,
        };
      case "Type":
        return {
          TAG: "Text",
          _0:
            LogicUtils.capitalizeString(
              RoutingUtils.routingTypeName(
                RoutingUtils.routingTypeMapper(historyData.kind),
              ),
            ) + " Based",
        };
      case "ProfileId":
        return {
          TAG: "Text",
          _0: historyData.profile_id,
        };
      case "ProfileName":
        return {
          TAG: "CustomCell",
          _0: React.createElement(
            HelperComponents.BusinessProfileComponent.make,
            {
              profile_id: historyData.profile_id,
            },
          ),
          _1: "",
        };
      case "Description":
        return {
          TAG: "Text",
          _0: historyData.description,
        };
      case "Created":
        return {
          TAG: "Text",
          _0: historyData.created_at,
        };
      case "LastUpdated":
        return {
          TAG: "Text",
          _0: historyData.modified_at,
        };
      case "Status":
        return {
          TAG: "Label",
          _0: {
            title: activeRoutingIds.includes(historyData.id)
              ? "ACTIVE"
              : "INACTIVE".toUpperCase(),
            color: activeRoutingIds.includes(historyData.id)
              ? "LabelGreen"
              : "LabelWhite",
          },
        };
    }
  };
}

function getHistoryRules(json) {
  return LogicUtils.getArrayDataFromJson(json, itemToObjMapper);
}

function historyEntity(activeRoutingIds, permission) {
  return EntityType.makeEntity(
    "",
    getHistoryRules,
    defaultColumns,
    allColumns,
    getHeading,
    getTableCell(activeRoutingIds),
    "records",
    undefined,
    undefined,
    undefined,
    undefined,
    function (value) {
      return PermissionUtils.linkForGetShowLinkViaAccess(
        permission,
        GlobalVars.appendDashboardPath(
          "/routing/" +
            RoutingUtils.routingTypeName(
              RoutingUtils.routingTypeMapper(value.kind),
            ) +
            "?id=" +
            value.id +
            (activeRoutingIds.includes(value.id) ? "&isActive=true" : ""),
        ),
      );
    },
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
  );
}

export {
  allColumns,
  itemToObjMapper,
  defaultColumns,
  getHeading,
  getTableCell,
  getHistoryRules,
  historyEntity,
};
/* Table Not a pure module */
