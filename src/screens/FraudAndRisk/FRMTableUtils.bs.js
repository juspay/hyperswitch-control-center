// Generated by ReScript, PLEASE EDIT WITH CARE

import * as FRMUtils from "./FRMUtils.bs.js";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as Core__JSON from "@rescript/core/src/Core__JSON.bs.js";
import * as EntityType from "../../entities/EntityType.bs.js";
import * as GlobalVars from "../../utils/GlobalVars.bs.js";
import * as Core__Option from "@rescript/core/src/Core__Option.bs.js";
import * as PermissionUtils from "../UserManagement/PermissionUtils.bs.js";
import * as ConnectorListMapper from "../../utils/Mappers/ConnectorListMapper.bs.js";
import * as ConnectorTableUtils from "../Connectors/ConnectorTableUtils.bs.js";

function getArrayDataFromJson(json, itemToObjMapper) {
  return FRMUtils.filterList(
    Belt_Array.keepMap(
      Core__Option.getOr(Core__JSON.Decode.array(json), []),
      Core__JSON.Decode.object,
    ),
    "Connector",
    undefined,
  ).map(itemToObjMapper);
}

function getPreviouslyConnectedList(json) {
  return ConnectorTableUtils.sortPreviouslyConnectedList(
    getArrayDataFromJson(json, ConnectorListMapper.getProcessorPayloadType),
  );
}

function connectorEntity(path, permission) {
  return EntityType.makeEntity(
    "",
    getPreviouslyConnectedList,
    ConnectorTableUtils.defaultColumns,
    undefined,
    ConnectorTableUtils.getHeading,
    ConnectorTableUtils.getTableCell("FRMPlayer", undefined),
    "",
    undefined,
    undefined,
    undefined,
    undefined,
    function (connec) {
      return PermissionUtils.linkForGetShowLinkViaAccess(
        permission,
        GlobalVars.appendDashboardPath(
          "/" +
            path +
            "/" +
            connec.merchant_connector_id +
            "?name=" +
            connec.connector_name,
        ),
      );
    },
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
    undefined,
  );
}

export { getArrayDataFromJson, getPreviouslyConnectedList, connectorEntity };
/* FRMUtils Not a pure module */
