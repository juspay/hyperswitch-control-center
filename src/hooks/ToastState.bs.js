// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Recoil from "../libraries/Recoil.bs.js";
import * as Recoil$1 from "recoil";
import * as Core__Math from "@rescript/core/src/Core__Math.bs.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Array from "@rescript/core/src/Core__Array.bs.js";

function randomString(length, chars) {
  return Core__Array.reduce(
    Core__Array.make(length, 0),
    "",
    function (acc, param) {
      var charIndex = Core__Math.Int.random(0, chars.length);
      var newChar = chars.charAt(charIndex);
      return acc + newChar;
    },
  );
}

function makeToastProps(
  message,
  toastType,
  autoCloseOpt,
  toastDurationOpt,
  buttonText,
  helpLink,
  toastElementOpt,
  param,
) {
  var autoClose = autoCloseOpt !== undefined ? autoCloseOpt : false;
  var toastDuration = toastDurationOpt !== undefined ? toastDurationOpt : 0;
  var toastElement =
    toastElementOpt !== undefined
      ? Caml_option.valFromOption(toastElementOpt)
      : null;
  var rString = randomString(
    32,
    "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",
  );
  return {
    toastKey: rString,
    message: message,
    toastType: toastType,
    autoClose: autoClose,
    toastDuration: toastDuration,
    buttonText: buttonText,
    helpLink: helpLink,
    toastElement: toastElement,
  };
}

var defaultOpenToasts = [];

var openToasts = Recoil.atom("openToasts", defaultOpenToasts);

function useShowToast() {
  var setOpenToasts = Recoil$1.useSetRecoilState(openToasts);
  return React.useMemo(
    function () {
      return function (
        message,
        toastType,
        toastDurationOpt,
        autoCloseOpt,
        buttonText,
        helpLink,
        toastElementOpt,
        param,
      ) {
        var toastDuration =
          toastDurationOpt !== undefined ? toastDurationOpt : 0;
        var autoClose = autoCloseOpt !== undefined ? autoCloseOpt : false;
        var toastElement =
          toastElementOpt !== undefined
            ? Caml_option.valFromOption(toastElementOpt)
            : null;
        var toastProps = makeToastProps(
          message,
          toastType,
          autoClose,
          toastDuration,
          buttonText,
          helpLink,
          Caml_option.some(toastElement),
          undefined,
        );
        setOpenToasts(function (prevArr) {
          return prevArr.concat([toastProps]);
        });
      };
    },
    [setOpenToasts],
  );
}

export {
  randomString,
  makeToastProps,
  defaultOpenToasts,
  openToasts,
  useShowToast,
};
/* openToasts Not a pure module */
