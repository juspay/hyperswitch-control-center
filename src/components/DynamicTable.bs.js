// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Icon from "./Icon.bs.js";
import Dayjs from "dayjs";
import * as React from "react";
import * as Button from "./Button.bs.js";
import * as Filter from "./Filter.bs.js";
import * as Portal from "./portal/Portal.bs.js";
import * as Caml_obj from "rescript/lib/es6/caml_obj.js";
import * as RenderIf from "../utils/RenderIf.bs.js";
import * as AuthHooks from "../hooks/AuthHooks.bs.js";
import * as Core__JSON from "@rescript/core/src/Core__JSON.bs.js";
import * as LogicUtils from "../utils/LogicUtils.bs.js";
import * as MatchMedia from "../context/MatchMedia.bs.js";
import * as ToastState from "../hooks/ToastState.bs.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Array from "@rescript/core/src/Core__Array.bs.js";
import * as LoadedTable from "./LoadedTable.bs.js";
import * as Core__Option from "@rescript/core/src/Core__Option.bs.js";
import * as LocalFilters from "./LocalFilters.bs.js";
import * as Core__Promise from "@rescript/core/src/Core__Promise.bs.js";
import * as DictionaryUtils from "../utils/DictionaryUtils.bs.js";
import * as JsonFlattenUtils from "../utils/JsonFlattenUtils.bs.js";
import * as ReactWindowTable from "./ReactWindowTable.bs.js";
import * as DynamicTableUtils from "./DynamicTableUtils.bs.js";
import * as RemoteFiltersUtils from "./RemoteFiltersUtils.bs.js";
import * as RefreshStateContext from "../context/RefreshStateContext.bs.js";
import * as RescriptReactRouter from "@rescript/react/src/RescriptReactRouter.bs.js";
import * as LabelVisibilityContext from "./form/LabelVisibilityContext.bs.js";

function useRemoteFilter(
  searchParams,
  remoteFilters,
  remoteOptions,
  mandatoryRemoteKeys,
) {
  var match = React.useState(function () {
    return {};
  });
  var remoteFiltersFromUrl = match[0];
  var remoteFiltersFromUrlTemp = React.useMemo(
    function () {
      return RemoteFiltersUtils.getInitialValuesFromUrl(
        searchParams,
        remoteFilters,
        remoteOptions,
        mandatoryRemoteKeys,
        undefined,
      );
    },
    [searchParams],
  );
  if (
    JSON.stringify(remoteFiltersFromUrlTemp) !==
    JSON.stringify(remoteFiltersFromUrl)
  ) {
    match[1](function (_prev) {
      return remoteFiltersFromUrlTemp;
    });
  }
  return remoteFiltersFromUrl;
}

function DynamicTable(props) {
  var __urlKeyTypeDict = props.urlKeyTypeDict;
  var defaultKeysAllowed = props.defaultKeysAllowed;
  var __mergeBodytoRemoteFilterDict = props.mergeBodytoRemoteFilterDict;
  var __disableURIdecode = props.disableURIdecode;
  var __noDataMsg = props.noDataMsg;
  var __headBottomMargin = props.headBottomMargin;
  var __showFilterBorder = props.showFilterBorder;
  var __showFiltersSearch = props.showFiltersSearch;
  var __customLocalFilterStyle = props.customLocalFilterStyle;
  var __ignoreHeaderBg = props.ignoreHeaderBg;
  var __tableheadingClass = props.tableheadingClass;
  var __maxTableHeight = props.maxTableHeight;
  var __errorButtonType = props.errorButtonType;
  var __applyFilters = props.applyFilters;
  var filterCols = props.filterCols;
  var setFilterObj = props.setFilterObj;
  var filterObj = props.filterObj;
  var __addDataLoading = props.addDataLoading;
  var __showClearFilter = props.showClearFilter;
  var __requireDateFormatting = props.requireDateFormatting;
  var __rowCustomClass = props.rowCustomClass;
  var __titleTooltip = props.titleTooltip;
  var __rowHeightClass = props.rowHeightClass;
  var __reactWindow = props.reactWindow;
  var __customFilterStyle = props.customFilterStyle;
  var onMouseLeave = props.onMouseLeave;
  var onMouseEnter = props.onMouseEnter;
  var __getRowDetails = props.getRowDetails;
  var __filterButtonStyle = props.filterButtonStyle;
  var __collapseTableRow = props.collapseTableRow;
  var __forcePreventConcatData = props.forcePreventConcatData;
  var __isSearchKeyArray = props.isSearchKeyArray;
  var __mandatoryRemoteKeys = props.mandatoryRemoteKeys;
  var __searchkeysDict = props.searchkeysDict;
  var __dropdownSearchKeyValueNames = props.dropdownSearchKeyValueNames;
  var __tableLocalFilter = props.tableLocalFilter;
  var __isEulerOrderEntity = props.isEulerOrderEntity;
  var __portalKey = props.portalKey;
  var getCustomUriForOrder = props.getCustomUriForOrder;
  var __customizedColumnsStyle = props.customizedColumnsStyle;
  var activeColumnsAtom = props.activeColumnsAtom;
  var dataNotFoundComponent = props.dataNotFoundComponent;
  var defaultSort = props.defaultSort;
  var __isFiltersInPortal = props.isFiltersInPortal;
  var body = props.body;
  var __ignoreUrlUpdate = props.ignoreUrlUpdate;
  var downloadCsv = props.downloadCsv;
  var path = props.path;
  var __method = props.method;
  var onEntityClick = props.onEntityClick;
  var __resultsPerPage = props.resultsPerPage;
  var bottomActions = props.bottomActions;
  var __hideFilterTopPortals = props.hideFilterTopPortals;
  var __isTableActionBesideFilters = props.isTableActionBesideFilters;
  var tableActions = props.tableActions;
  var __showSerialNumber = props.showSerialNumber;
  var __hideFiltersOnNoData = props.hideFiltersOnNoData;
  var description = props.description;
  var __hideTitle = props.hideTitle;
  var __titleSize = props.titleSize;
  var title = props.title;
  var entity = props.entity;
  var titleSize = __titleSize !== undefined ? __titleSize : "Large";
  var hideTitle = __hideTitle !== undefined ? __hideTitle : false;
  var hideFiltersOnNoData =
    __hideFiltersOnNoData !== undefined ? __hideFiltersOnNoData : false;
  var showSerialNumber =
    __showSerialNumber !== undefined ? __showSerialNumber : false;
  var isTableActionBesideFilters =
    __isTableActionBesideFilters !== undefined
      ? __isTableActionBesideFilters
      : false;
  var hideFilterTopPortals =
    __hideFilterTopPortals !== undefined ? __hideFilterTopPortals : true;
  var resultsPerPage = __resultsPerPage !== undefined ? __resultsPerPage : 15;
  var method = __method !== undefined ? __method : "Post";
  var ignoreUrlUpdate =
    __ignoreUrlUpdate !== undefined ? __ignoreUrlUpdate : false;
  var isFiltersInPortal =
    __isFiltersInPortal !== undefined ? __isFiltersInPortal : true;
  var customizedColumnsStyle =
    __customizedColumnsStyle !== undefined ? __customizedColumnsStyle : "";
  var portalKey = __portalKey !== undefined ? __portalKey : "desktopNavbarLeft";
  var isEulerOrderEntity =
    __isEulerOrderEntity !== undefined ? __isEulerOrderEntity : false;
  var tableLocalFilter =
    __tableLocalFilter !== undefined ? __tableLocalFilter : false;
  var dropdownSearchKeyValueNames =
    __dropdownSearchKeyValueNames !== undefined
      ? __dropdownSearchKeyValueNames
      : [];
  var searchkeysDict = __searchkeysDict !== undefined ? __searchkeysDict : {};
  var mandatoryRemoteKeys =
    __mandatoryRemoteKeys !== undefined ? __mandatoryRemoteKeys : [];
  var isSearchKeyArray =
    __isSearchKeyArray !== undefined ? __isSearchKeyArray : false;
  var forcePreventConcatData =
    __forcePreventConcatData !== undefined ? __forcePreventConcatData : false;
  var collapseTableRow =
    __collapseTableRow !== undefined ? __collapseTableRow : false;
  var filterButtonStyle =
    __filterButtonStyle !== undefined ? __filterButtonStyle : "";
  var getRowDetails =
    __getRowDetails !== undefined
      ? __getRowDetails
      : function (param) {
          return null;
        };
  var customFilterStyle =
    __customFilterStyle !== undefined ? __customFilterStyle : "";
  var reactWindow = __reactWindow !== undefined ? __reactWindow : false;
  var rowHeightClass = __rowHeightClass !== undefined ? __rowHeightClass : "";
  var titleTooltip = __titleTooltip !== undefined ? __titleTooltip : false;
  var rowCustomClass = __rowCustomClass !== undefined ? __rowCustomClass : "";
  var requireDateFormatting =
    __requireDateFormatting !== undefined ? __requireDateFormatting : false;
  var showClearFilter =
    __showClearFilter !== undefined ? __showClearFilter : true;
  var addDataLoading =
    __addDataLoading !== undefined ? __addDataLoading : false;
  var applyFilters = __applyFilters !== undefined ? __applyFilters : false;
  var errorButtonType =
    __errorButtonType !== undefined ? __errorButtonType : "Primary";
  var maxTableHeight = __maxTableHeight !== undefined ? __maxTableHeight : "";
  var tableheadingClass =
    __tableheadingClass !== undefined ? __tableheadingClass : "";
  var ignoreHeaderBg =
    __ignoreHeaderBg !== undefined ? __ignoreHeaderBg : false;
  var customLocalFilterStyle =
    __customLocalFilterStyle !== undefined ? __customLocalFilterStyle : "";
  var showFiltersSearch =
    __showFiltersSearch !== undefined ? __showFiltersSearch : false;
  var showFilterBorder =
    __showFilterBorder !== undefined ? __showFilterBorder : false;
  var headBottomMargin =
    __headBottomMargin !== undefined ? __headBottomMargin : "mb-6 mobile:mb-4";
  var noDataMsg = __noDataMsg !== undefined ? __noDataMsg : "No Data Available";
  var disableURIdecode =
    __disableURIdecode !== undefined ? __disableURIdecode : false;
  var mergeBodytoRemoteFilterDict =
    __mergeBodytoRemoteFilterDict !== undefined
      ? __mergeBodytoRemoteFilterDict
      : false;
  var urlKeyTypeDict = __urlKeyTypeDict !== undefined ? __urlKeyTypeDict : {};
  var filterForRow = entity.filterForRow;
  var filterCheck = entity.filterCheck;
  var searchValueDict = entity.searchValueDict;
  var popupFilterFields = entity.popupFilterFields;
  var getNewUrl = entity.getNewUrl;
  var options = entity.options;
  var initialFilters = entity.initialFilters;
  var headers = entity.headers;
  var getSummary = entity.getSummary;
  var summaryKey = entity.summaryKey;
  var dataKey = entity.dataKey;
  var defaultColumns = entity.defaultColumns;
  var getObjects = entity.getObjects;
  var uri = entity.uri;
  var tableName = Core__Option.getOr(props.prefixAddition, false)
    ? (function (__x) {
        return __x.replace(/ /g, "-");
      })(title).toLowerCase()
    : undefined;
  var match = React.useState(function () {
    return entity.defaultFilters;
  });
  var setDefaultFilters = match[1];
  var defaultFilters = match[0];
  var match$1 = React.useState(function () {
    return {
      totalCount: 0,
      count: 0,
    };
  });
  var setSummary = match$1[1];
  var summary = match$1[0];
  var match$2 = React.useState(function () {});
  var setData = match$2[1];
  var data = match$2[0];
  var match$3 = React.useState(function () {
    return false;
  });
  var setTableDataLoading = match$3[1];
  var tableDataLoading = match$3[0];
  var fetchApi = AuthHooks.useApiFetcher();
  var url = RescriptReactRouter.useUrl(undefined, undefined);
  var searchParams = disableURIdecode ? url.search : decodeURI(url.search);
  var match$4 = React.useContext(RefreshStateContext.refreshStateContext);
  var match$5 = React.useState(function () {
    return 0;
  });
  var setOffset = match$5[1];
  var offset = match$5[0];
  var remoteFilters = initialFilters.filter(function (item) {
    return Core__Option.isNone(item.localFilter);
  });
  var filtersFromUrl = LogicUtils.getDictFromUrlSearchParams(searchParams);
  var localFilters = initialFilters.filter(function (item) {
    return Core__Option.isSome(item.localFilter);
  });
  var showToast = ToastState.useShowToast();
  var localOptions = options.concat(popupFilterFields).filter(function (item) {
    return Core__Option.isSome(item.localFilter);
  });
  var remoteOptions = options.concat(popupFilterFields).filter(function (item) {
    return Core__Option.isNone(item.localFilter);
  });
  var remoteFiltersFromUrl = useRemoteFilter(
    searchParams,
    remoteFilters,
    remoteOptions,
    mandatoryRemoteKeys,
  );
  var isMobileView = MatchMedia.useMobileChecker();
  var resultsPerPage$1 = isMobileView ? 10 : resultsPerPage;
  var match$6 = React.useState(function () {
    return true;
  });
  var setFetchSuccess = match$6[1];
  var match$7 = React.useState(function () {
    return 0;
  });
  var setRefetchCounter = match$7[1];
  var refetchCounter = match$7[0];
  var match$8 = React.useState(function () {
    return false;
  });
  var setShowColumnSelector = match$8[1];
  var match$9 = React.useState(function () {});
  var setFinalData = match$9[1];
  var finalData = match$9[0];
  React.useEffect(
    function () {
      setDefaultFilters(function (param) {
        return entity.defaultFilters;
      });
    },
    [entity.defaultFilters],
  );
  React.useEffect(
    function () {
      var remoteFilterDict = RemoteFiltersUtils.getFinalDict(
        defaultFilters,
        remoteFiltersFromUrl,
        remoteOptions.concat(popupFilterFields),
        isEulerOrderEntity,
        dropdownSearchKeyValueNames,
        searchkeysDict,
        isSearchKeyArray,
        defaultKeysAllowed,
        urlKeyTypeDict,
        undefined,
      );
      var finalJson;
      if (body !== undefined) {
        var remoteFilterDict$1 =
          LogicUtils.getDictFromJsonObject(remoteFilterDict);
        finalJson = mergeBodytoRemoteFilterDict
          ? DictionaryUtils.mergeDicts([
              LogicUtils.getDictFromJsonObject(body),
              remoteFilterDict$1,
            ])
          : body;
      } else {
        finalJson = remoteFilterDict;
      }
      var setNewData = function (sampleRes) {
        if (
          (Caml_obj.notequal(
            LogicUtils.getDictFromJsonObject(remoteFiltersFromUrl),
            {},
          ) &&
            offset === 0) ||
          forcePreventConcatData
        ) {
          setData(function (param) {
            return [];
          });
        }
        setData(function (prevData) {
          return Core__Option.getOr(prevData, []).concat(sampleRes);
        });
      };
      var getCustomUri = function (uri, searchValueDict) {
        var uriList = Object.keys(searchValueDict).map(function (val) {
          var defaultFilterOffset = LogicUtils.getInt(
            LogicUtils.getDictFromJsonObject(defaultFilters),
            "offset",
            0,
          );
          var dictValue;
          if (val === "offset") {
            dictValue = defaultFilterOffset.toString();
          } else {
            var x = Core__Option.getOr(
              filtersFromUrl[val],
              Core__Option.getOr(searchValueDict[val], ""),
            );
            dictValue =
              requireDateFormatting &&
              (val === "startTime" || val === "endTime")
                ? Dayjs(x).format("YYYY-MM-DD+HH:mm:ss")
                : requireDateFormatting &&
                    (val === "start_date" || val === "end_date")
                  ? Dayjs(x).format("YYYY-MM-DD HH:mm:ss")
                  : x;
          }
          if (LogicUtils.isEmptyString(dictValue) || dictValue === "NA") {
            return "";
          } else {
            return val + "=" + dictValue;
          }
        });
        return (
          uri +
          "?" +
          uriList
            .filter(function (val) {
              return LogicUtils.isNonEmptyString(val);
            })
            .join("&")
        );
      };
      var uri$1 =
        searchValueDict !== undefined
          ? getCustomUri(uri, searchValueDict)
          : uri;
      var uri$2 =
        getCustomUriForOrder !== undefined
          ? getCustomUriForOrder(uri$1, remoteFiltersFromUrl, finalJson)
          : uri$1;
      var uri$3 = uri$2 + getNewUrl(defaultFilters);
      setTableDataLoading(function (param) {
        return true;
      });
      Core__Promise.$$catch(
        fetchApi(
          uri$3,
          JSON.stringify(finalJson),
          undefined,
          headers,
          method,
          undefined,
          undefined,
          undefined,
        )
          .then(function (resp) {
            var status = resp.status;
            if (status >= 300) {
              setFetchSuccess(function (param) {
                return false;
              });
              setTableDataLoading(function (param) {
                return false;
              });
            }
            return resp.json();
          })
          .then(function (json) {
            var _arr = Core__JSON.Classify.classify(json);
            var exit = 0;
            if (typeof _arr !== "object") {
              exit = 1;
            } else {
              switch (_arr.TAG) {
                case "Object":
                  var dict = _arr._0;
                  var flattenedObject = JsonFlattenUtils.flattenObject(
                    json,
                    false,
                  );
                  var x = flattenedObject[dataKey];
                  if (x !== undefined) {
                    setNewData(
                      getObjects(x).map(function (obj) {
                        return obj;
                      }),
                    );
                  }
                  var x$1 = dict[summaryKey];
                  var summary =
                    x$1 !== undefined ? getSummary(x$1) : getSummary(dict);
                  setSummary(function (param) {
                    return summary;
                  });
                  break;
                case "Array":
                  setNewData(
                    getObjects(json).map(function (obj) {
                      return obj;
                    }),
                  );
                  break;
                default:
                  exit = 1;
              }
            }
            if (exit === 1) {
              showToast(
                "Response was not a JSON object",
                "ToastError",
                undefined,
                true,
                undefined,
                undefined,
                undefined,
                undefined,
              );
            }
            setTableDataLoading(function (param) {
              return false;
            });
            return Promise.resolve();
          }),
        function (param) {
          return Promise.resolve();
        },
      );
    },
    [remoteFiltersFromUrl, defaultFilters, fetchApi, match$4[0], uri],
  );
  React.useEffect(
    function () {
      if (refetchCounter > 0) {
        window.location.reload();
      }
    },
    [refetchCounter],
  );
  var refetch = React.useCallback(
    function () {
      setRefetchCounter(function (p) {
        return (p + 1) | 0;
      });
    },
    [setRefetchCounter],
  );
  var visibleColumns = Core__Option.getOr(props.visibleColumns, defaultColumns);
  var handleRefetch = function () {
    var rowFetched = Core__Option.getOr(data, []).length;
    if (rowFetched === summary.totalCount) {
      return;
    }
    setTableDataLoading(function (param) {
      return true;
    });
    var newDefaultFilter = Object.fromEntries(
      Object.entries(
        Core__Option.getOr(Core__JSON.Decode.object(defaultFilters), {}),
      ),
    );
    newDefaultFilter["offset"] = rowFetched;
    setDefaultFilters(function (param) {
      return newDefaultFilter;
    });
  };
  var showLocalFilter =
    (localFilters.length > 0 || localOptions.length > 0) &&
    Core__Option.getOr(applyFilters ? finalData : data, []).length > 0;
  var showRemoteFilter = remoteFilters.length > 0 || remoteOptions.length > 0;
  var filters;
  if (
    (initialFilters.length > 0 || options.length > 0) &&
    (showLocalFilter || showRemoteFilter) &&
    (!hideFiltersOnNoData || Core__Option.getOr(data, []).length > 0)
  ) {
    var children = React.createElement(
      "div",
      {
        className: "flex-1 " + customFilterStyle,
      },
      showLocalFilter
        ? React.createElement(LabelVisibilityContext.make, {
            children: React.createElement(LocalFilters.make, {
              entity: entity,
              setOffset: setOffset,
              localFilters: localFilters,
              localOptions: localOptions,
              remoteOptions: remoteOptions,
              remoteFilters: remoteFilters,
              mandatoryRemoteKeys: mandatoryRemoteKeys,
              path: path,
              tableName: tableName,
              customLocalFilterStyle: customLocalFilterStyle,
              showSelectFiltersSearch: showFiltersSearch,
              disableURIdecode: disableURIdecode,
            }),
            showLabel: false,
          })
        : null,
      React.createElement(RenderIf.make, {
        condition: showRemoteFilter,
        children: React.createElement(LabelVisibilityContext.make, {
          children: React.createElement(Filter.make, {
            defaultFilters: entity.defaultFilters,
            requiredSearchFieldsList: entity.requiredSearchFieldsList,
            setOffset: setOffset,
            title: title,
            path: path,
            remoteFilters: remoteFilters,
            remoteOptions: remoteOptions,
            localOptions: localOptions,
            localFilters: localFilters,
            mandatoryRemoteKeys: mandatoryRemoteKeys,
            popupFilterFields: popupFilterFields,
            tableName: tableName,
            autoApply: props.autoApply,
            filterButtonStyle: filterButtonStyle,
            showClearFilter: showClearFilter,
            showSelectFiltersSearch: showFiltersSearch,
          }),
          showLabel: false,
        }),
      }),
    );
    filters = isFiltersInPortal
      ? React.createElement(Portal.make, {
          to: portalKey,
          children: children,
        })
      : children;
  } else {
    filters = null;
  }
  React.useEffect(
    function () {
      var temp =
        filterObj !== undefined
          ? filterCols !== undefined
            ? (filterCols.map(function (key) {
                filterObj[key] = filterForRow(data, key);
              }),
              filterObj)
            : []
          : [];
      if (setFilterObj !== undefined) {
        setFilterObj(function (param) {
          return temp;
        });
      }
    },
    [data],
  );
  var checkLength = {
    contents: true,
  };
  React.useEffect(
    function () {
      var findVal = function (accumulator, item) {
        return accumulator.concat(item.selected);
      };
      var keys =
        filterObj !== undefined
          ? Core__Array.reduce(filterObj, [], findVal)
          : [];
      if (filterObj !== undefined) {
        if (filterCols !== undefined) {
          for (var i = 0, i_finish = filterCols.length; i < i_finish; ++i) {
            var tmp = false;
            if (checkLength.contents) {
              var ele = filterObj[Core__Option.getOr(filterCols[i], 0)];
              tmp = ele !== undefined ? ele.selected.length > 0 : false;
            }
            checkLength.contents = tmp;
          }
        }
        if (checkLength.contents) {
          var newData =
            data !== undefined
              ? data.filter(function (item) {
                  if (item == null) {
                    return false;
                  } else {
                    return filterCheck(item, keys);
                  }
                })
              : [];
          setFinalData(function (param) {
            return newData;
          });
        } else {
          setFinalData(function (param) {
            return data;
          });
        }
      }
    },
    [filterObj, data],
  );
  var dataLoading = addDataLoading ? tableDataLoading : false;
  var actualData = applyFilters ? finalData : data;
  if (actualData === undefined) {
    return React.createElement(
      DynamicTableUtils.TableLoadingErrorIndicator.make,
      {
        title: title,
        titleSize: titleSize,
        showFilterBorder: showFilterBorder,
        fetchSuccess: match$6[0],
        filters: filters,
        buttonType: errorButtonType,
        hideTitle: hideTitle,
      },
    );
  }
  var localFilteredData =
    localFilters.length > 0 || localOptions.length > 0
      ? RemoteFiltersUtils.getLocalFiltersData(
          actualData,
          searchParams,
          localFilters,
          entity.dateRangeFilterDict,
          localOptions,
          undefined,
        )
      : actualData;
  var currrentFetchCount = localFilteredData.length;
  var totalResults =
    actualData.length < summary.totalCount
      ? summary.totalCount
      : currrentFetchCount;
  var customizeColumn =
    Core__Option.isSome(activeColumnsAtom) &&
    Core__Option.isSome(entity.allColumns) &&
    totalResults > 0
      ? React.createElement(Button.make, {
          text: "Customize Columns",
          buttonType: "SecondaryFilled",
          buttonSize: "XSmall",
          leftIcon: {
            TAG: "CustomIcon",
            _0: React.createElement(Icon.make, {
              name: "vertical_slider",
              size: 15,
              className: "mr-1",
            }),
          },
          showBorder: true,
          onClick: function (param) {
            setShowColumnSelector(function (param) {
              return true;
            });
          },
          customButtonStyle: customizedColumnsStyle,
        })
      : null;
  var chooseCols =
    customizeColumn === null
      ? null
      : React.createElement(DynamicTableUtils.ChooseColumnsWrapper.make, {
          entity: entity,
          totalResults: totalResults,
          defaultColumns: defaultColumns,
          activeColumnsAtom: activeColumnsAtom,
          setShowColumnSelector: setShowColumnSelector,
          showColumnSelector: match$8[0],
        });
  var filt = React.createElement(
    "div",
    {
      className: "flex flex-row gap-4",
    },
    filters,
    chooseCols,
  );
  return React.createElement(DynamicTableUtils.RefetchContextProvider.make, {
    value: refetch,
    children: reactWindow
      ? React.createElement(ReactWindowTable.make, {
          actualData: localFilteredData,
          defaultSort: defaultSort,
          title: title,
          visibleColumns: visibleColumns,
          description: description,
          tableActions: tableActions,
          rightTitleElement: Caml_option.some(customizeColumn),
          bottomActions: bottomActions,
          showSerialNumber: showSerialNumber,
          totalResults: totalResults,
          entity: entity,
          onEntityClick: onEntityClick,
          downloadCsv: downloadCsv,
          hideTitle: hideTitle,
          tableDataLoading: tableDataLoading,
          dataNotFoundComponent: dataNotFoundComponent,
          tableLocalFilter: tableLocalFilter,
          collapseTableRow: collapseTableRow,
          getRowDetails: getRowDetails,
          onMouseEnter: onMouseEnter,
          onMouseLeave: onMouseLeave,
        })
      : React.createElement(LoadedTable.make, {
          visibleColumns: visibleColumns,
          defaultSort: defaultSort,
          title: title,
          titleSize: titleSize,
          description: description,
          tableActions: tableActions,
          isTableActionBesideFilters: isTableActionBesideFilters,
          hideFilterTopPortals: hideFilterTopPortals,
          rightTitleElement: Caml_option.some(customizeColumn),
          bottomActions: bottomActions,
          showSerialNumber: showSerialNumber,
          actualData: localFilteredData,
          totalResults: totalResults,
          resultsPerPage: resultsPerPage$1,
          offset: offset,
          setOffset: setOffset,
          handleRefetch: handleRefetch,
          entity: entity,
          onEntityClick: onEntityClick,
          currrentFetchCount: currrentFetchCount,
          filters: Caml_option.some(filt),
          showFilterBorder: showFilterBorder,
          headBottomMargin: headBottomMargin,
          downloadCsv: downloadCsv,
          ignoreUrlUpdate: ignoreUrlUpdate,
          hideTitle: hideTitle,
          ignoreHeaderBg: ignoreHeaderBg,
          tableDataLoading: tableDataLoading,
          dataLoading: dataLoading,
          advancedSearchComponent: props.advancedSearchComponent,
          setData: setData,
          setSummary: setSummary,
          dataNotFoundComponent: dataNotFoundComponent,
          renderCard: props.renderCard,
          tableLocalFilter: tableLocalFilter,
          tableheadingClass: tableheadingClass,
          tableBorderClass: props.tableBorderClass,
          tableDataBorderClass: props.tableDataBorderClass,
          collapseTableRow: collapseTableRow,
          getRowDetails: getRowDetails,
          onMouseEnter: onMouseEnter,
          onMouseLeave: onMouseLeave,
          frozenUpto: props.frozenUpto,
          heightHeadingClass: props.heightHeadingClass,
          rowHeightClass: rowHeightClass,
          titleTooltip: titleTooltip,
          rowCustomClass: rowCustomClass,
          filterObj: filterObj,
          setFilterObj: setFilterObj,
          filterIcon: props.filterIcon,
          maxTableHeight: maxTableHeight,
          noDataMsg: noDataMsg,
          tableActionBorder: props.tableActionBorder,
          checkBoxProps: props.checkBoxProps,
          paginationClass: props.paginationClass,
        }),
  });
}

var make = DynamicTable;

export { useRemoteFilter, make };
/* Icon Not a pure module */
