// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as TableUtils from "./TableUtils.bs.js";
import * as ThemeProvider from "../context/ThemeProvider.bs.js";
import * as AddDataAttributes from "./AddDataAttributes.bs.js";
import * as JsxPPXReactSupportU from "rescript/lib/es6/jsxPPXReactSupportU.js";

function CardTable$TextCard(props) {
  var text = props.text;
  if (text.trim().length > 0) {
    return React.createElement(
      "p",
      {
        className: "break-words font-semibold",
      },
      text.trim().length > 0 ? text : "N/A",
    );
  } else {
    return "-";
  }
}

var TextCard = {
  make: CardTable$TextCard,
};

function CardTable$ItemValue(props) {
  var __fontStyle = props.fontStyle;
  var __customMoneyStyle = props.customMoneyStyle;
  var cell = props.cell;
  var customMoneyStyle =
    __customMoneyStyle !== undefined ? __customMoneyStyle : "";
  var fontStyle = __fontStyle !== undefined ? __fontStyle : "";
  switch (cell.TAG) {
    case "Label":
      var x = cell._0;
      return React.createElement(TableUtils.LabelCell.make, {
        labelColor: x.color,
        text: x.title,
        fontStyle: fontStyle,
      });
    case "Text":
      return React.createElement(CardTable$TextCard, {
        text: cell._0,
      });
    case "Currency":
      return React.createElement(TableUtils.MoneyCell.make, {
        amount: cell._0,
        currency: cell._1,
        customMoneyStyle: customMoneyStyle,
      });
    case "Date":
      return React.createElement(TableUtils.DateCell.make, {
        timestamp: cell._0,
        isCard: true,
        textStyle: fontStyle,
        hideTime: true,
      });
    case "StartEndDate":
      return React.createElement(TableUtils.StartEndDateCell.make, {
        startDate: cell._0,
        endDate: cell._1,
        isCard: true,
      });
    case "Link":
      return React.createElement(TableUtils.LinkCell.make, {
        data: cell._0,
      });
    case "CustomCell":
      return cell._0;
    case "TrimmedText":
      return React.createElement(TableUtils.TrimmedText.make, {
        text: cell._0,
        width: cell._1,
        highlightText: "",
        hideShowMore: false,
      });
    case "DeltaPercentage":
      return React.createElement(TableUtils.DeltaColumn.make, {
        value: cell._0,
        delta: cell._1,
      });
    case "Numeric":
      return React.createElement(TableUtils.Numeric.make, {
        num: cell._0,
        mapper: cell._1,
        clearFormatting: false,
      });
    default:
      return null;
  }
}

var ItemValue = {
  make: CardTable$ItemValue,
};

function CardTable$CardDetails(props) {
  var isAnalyticsModule = props.isAnalyticsModule;
  var __isBorderEnabled = props.isBorderEnabled;
  var __offset = props.offset;
  var __size = props.size;
  var rowIndex = props.rowIndex;
  var onRowClick = props.onRowClick;
  var heading = props.heading;
  var itemArray = props.itemArray;
  var size = __size !== undefined ? __size : 4;
  var offset = __offset !== undefined ? __offset : 0;
  var isBorderEnabled =
    __isBorderEnabled !== undefined ? __isBorderEnabled : true;
  var match = React.useContext(ThemeProvider.themeContext);
  var onCardClick = function (_ev) {
    if (onRowClick !== undefined) {
      return onRowClick((rowIndex + offset) | 0);
    }
  };
  var match$1 = React.useState(function () {
    return true;
  });
  var setshow = match$1[1];
  var show = match$1[0];
  var showMore = function (_ev) {
    setshow(function (prev) {
      return !prev;
    });
  };
  var itemArray$1 = show ? itemArray.slice(0, size) : itemArray;
  return React.createElement(
    "div",
    {
      className: "w-full lg:w-1/4 md:w-1/2",
      onClick: onCardClick,
    },
    React.createElement(
      "div",
      {
        className:
          "flex justify-between flex-wrap dark:bg-jp-gray-lightgray_background bg-white my-2 px-4 " +
          (isBorderEnabled
            ? "border border-jp-gray-500 dark:border-jp-gray-960 p-4 rounded"
            : "") +
          " ",
      },
      itemArray$1.map(function (cell, cellIndex) {
        var key = ((cellIndex + offset) | 0).toString();
        var label = heading[cellIndex];
        if (label !== undefined) {
          if (isAnalyticsModule) {
            return React.createElement(
              "div",
              {
                key: cellIndex.toString(),
                className: "w-full flex jutify-end",
              },
              React.createElement(
                "p",
                {
                  className: "mt-2 md:inline inline-block w-1/2 ",
                },
                label.title,
              ),
              React.createElement(
                "div",
                {
                  className: "md:inline flex justify-end  w-1/2 break-all",
                },
                JsxPPXReactSupportU.createElementWithKey(
                  key,
                  CardTable$ItemValue,
                  {
                    cell: cell,
                  },
                ),
              ),
            );
          } else {
            return React.createElement(
              "div",
              {
                key: cellIndex.toString(),
                className: "w-full",
              },
              React.createElement(
                "p",
                {
                  className: "mt-2 md:inline inline-block w-1/2 ",
                },
                label.title,
              ),
              React.createElement(
                "div",
                {
                  className: "md:inline inline-block w-1/2 ",
                },
                JsxPPXReactSupportU.createElementWithKey(
                  key,
                  CardTable$ItemValue,
                  {
                    cell: cell,
                  },
                ),
              ),
            );
          }
        } else {
          return null;
        }
      }),
      isAnalyticsModule
        ? React.createElement(
            "div",
            {
              className:
                "flex justify-end " +
                match.globalUIConfig.font.textColor.primaryNormal +
                " cursor-pointer",
              onClick: showMore,
            },
            itemArray.length > size ? (show ? "More" : "Less") : null,
          )
        : null,
    ),
  );
}

var CardDetails = {
  make: CardTable$CardDetails,
};

function CardTable(props) {
  var __isAnalyticsModule = props.isAnalyticsModule;
  var __isBorderEnabled = props.isBorderEnabled;
  var __size = props.size;
  var onRowClick = props.onRowClick;
  var __offset = props.offset;
  var heading = props.heading;
  var offset = __offset !== undefined ? __offset : 0;
  var size = __size !== undefined ? __size : 4;
  var isBorderEnabled =
    __isBorderEnabled !== undefined ? __isBorderEnabled : true;
  var isAnalyticsModule =
    __isAnalyticsModule !== undefined ? __isAnalyticsModule : false;
  return React.createElement(
    "div",
    undefined,
    React.createElement(
      "div",
      {
        className: "overflow-auto flex flex-wrap",
      },
      props.rows.map(function (itemArray, rowIndex) {
        return React.createElement(AddDataAttributes.make, {
          attributes: [["data-card-details", "cardDetails"]],
          children: JsxPPXReactSupportU.createElementWithKey(
            ((rowIndex + offset) | 0).toString(),
            CardTable$CardDetails,
            {
              itemArray: itemArray,
              heading: heading,
              onRowClick: onRowClick,
              rowIndex: rowIndex,
              size: size,
              offset: offset,
              isBorderEnabled: isBorderEnabled,
              isAnalyticsModule: isAnalyticsModule,
            },
          ),
        });
      }),
    ),
  );
}

var make = CardTable;

export { TextCard, ItemValue, CardDetails, make };
/* react Not a pure module */
