// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Icon from "./Icon.bs.js";
import * as Tick from "./custom-icons/Tick.bs.js";
import * as React from "react";
import * as RenderIf from "../utils/RenderIf.bs.js";
import * as BottomModal from "./BottomModal.bs.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Option from "@rescript/core/src/Core__Option.bs.js";
import * as ThemeProvider from "../context/ThemeProvider.bs.js";
import * as React$1 from "@headlessui/react";
import * as AddDataAttributes from "./AddDataAttributes.bs.js";
import * as JsxPPXReactSupportU from "rescript/lib/es6/jsxPPXReactSupportU.js";

function HeadlessUISelectBox(props) {
  var __closeListOnClick = props.closeListOnClick;
  var __textClass = props.textClass;
  var __showBottomUp = props.showBottomUp;
  var __deSelectAllowed = props.deSelectAllowed;
  var __dropDownClass = props.dropDownClass;
  var __className = props.className;
  var __dropdownPosition = props.dropdownPosition;
  var children = props.children;
  var options = props.options;
  var setValue = props.setValue;
  var __value = props.value;
  var value =
    __value !== undefined
      ? __value
      : {
          TAG: "String",
          _0: "",
        };
  var dropdownPosition =
    __dropdownPosition !== undefined ? __dropdownPosition : "Left";
  var className = __className !== undefined ? __className : "";
  var dropDownClass = __dropDownClass !== undefined ? __dropDownClass : "w-52";
  var deSelectAllowed =
    __deSelectAllowed !== undefined ? __deSelectAllowed : true;
  var showBottomUp = __showBottomUp !== undefined ? __showBottomUp : false;
  var textClass = __textClass !== undefined ? __textClass : "text-sm";
  var closeListOnClick =
    __closeListOnClick !== undefined ? __closeListOnClick : false;
  var match = React.useContext(ThemeProvider.themeContext);
  var textColor = match.globalUIConfig.font.textColor;
  var dropdownPositionClass;
  switch (dropdownPosition) {
    case "Left":
      dropdownPositionClass = "right-0";
      break;
    case "Right":
    case "Top":
      dropdownPositionClass = "left-0";
      break;
  }
  var match$1 = React.useState(function () {
    return false;
  });
  var setShowList = match$1[1];
  var showList = match$1[0];
  var closeClick = function (param) {
    setShowList(function (param) {
      return !showList;
    });
  };
  return React.createElement(
    "div",
    {
      className: "text-left",
    },
    React.createElement(AddDataAttributes.make, {
      attributes: [["data-testid", "profile"]],
      children: React.createElement(React$1.Menu, {
        as: "div",
        className: "relative inline-block text-left",
        children: function (_menuProps) {
          return React.createElement(
            "div",
            undefined,
            React.createElement(React$1.Menu.Button, {
              className: className,
              children: function (_buttonProps) {
                return children;
              },
            }),
            React.createElement(React$1.Transition, {
              as: "span",
              enter: "transition ease-out duration-100",
              enterFrom: "transform opacity-0 scale-95",
              enterTo: "transform opacity-100 scale-100",
              leave: "transition ease-in duration-75",
              leaveFrom: "transform opacity-100 scale-100",
              leaveTo: "transform opacity-0 scale-95",
              children: Caml_option.some(
                showBottomUp
                  ? React.createElement(BottomModal.make, {
                      onCloseClick: closeClick,
                      children: React.createElement(React$1.Menu.Items, {
                        className:
                          "w-full p-1 origin-top-right bg-white dark:bg-jp-gray-950 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",
                        children: function (_props) {
                          return options.map(function (option, index) {
                            var selected;
                            selected =
                              value.TAG === "String"
                                ? value._0 === option.value
                                : value._0.includes(option.value);
                            var disabledClass = option.isDisabled
                              ? "disabled cursor-not-allowed"
                              : "";
                            return JsxPPXReactSupportU.createElementWithKey(
                              index.toString(),
                              React$1.Menu.Item,
                              {
                                children: function (props) {
                                  var isCloseIcon =
                                    props.active && deSelectAllowed;
                                  var iconName = option.leftIcon;
                                  var tmp;
                                  if (typeof iconName !== "object") {
                                    tmp = null;
                                  } else {
                                    switch (iconName.TAG) {
                                      case "FontAwesome":
                                        tmp = React.createElement(Icon.make, {
                                          name: iconName._0,
                                          size: 14,
                                          className:
                                            "align-middle " +
                                            Core__Option.getOr(
                                              option.customIconStyle,
                                              "",
                                            ),
                                        });
                                        break;
                                      case "CustomIcon":
                                        tmp = iconName._0;
                                        break;
                                      case "CustomRightIcon":
                                        tmp = null;
                                        break;
                                      case "Euler":
                                        tmp = React.createElement(Icon.make, {
                                          name: iconName._0,
                                          size: 12,
                                          className: "align-middle",
                                        });
                                        break;
                                    }
                                  }
                                  var iconName$1 = option.rightIcon;
                                  var tmp$1;
                                  if (typeof iconName$1 !== "object") {
                                    tmp$1 = null;
                                  } else {
                                    switch (iconName$1.TAG) {
                                      case "FontAwesome":
                                        tmp$1 = React.createElement(Icon.make, {
                                          name: iconName$1._0,
                                          size: 12,
                                          className:
                                            "align-middle " +
                                            Core__Option.getOr(
                                              option.customIconStyle,
                                              "",
                                            ),
                                        });
                                        break;
                                      case "CustomIcon":
                                        tmp$1 = iconName$1._0;
                                        break;
                                      case "CustomRightIcon":
                                        tmp$1 = null;
                                        break;
                                      case "Euler":
                                        tmp$1 = React.createElement(Icon.make, {
                                          name: iconName$1._0,
                                          size: 12,
                                          className: "align-middle",
                                        });
                                        break;
                                    }
                                  }
                                  return React.createElement(
                                    "div",
                                    {
                                      className:
                                        "group flex flex-row items-center justify-between rounded-md w-full p-3 text-fs-14 font-normal cursor-pointer " +
                                        (props.active
                                          ? "bg-gray-100 dark:bg-gray-700"
                                          : "") +
                                        " " +
                                        disabledClass,
                                      disabled: option.isDisabled,
                                      onClick: function (ev) {
                                        if (!closeListOnClick) {
                                          ev.stopPropagation();
                                          ev.preventDefault();
                                        }
                                        setValue(option.value);
                                      },
                                    },
                                    React.createElement(
                                      "div",
                                      {
                                        className:
                                          "flex flex-row items-center gap-2",
                                      },
                                      tmp,
                                      React.createElement(
                                        AddDataAttributes.make,
                                        {
                                          attributes: [
                                            ["data-options", option.label],
                                          ],
                                          children: React.createElement(
                                            "div",
                                            {
                                              className: Core__Option.getOr(
                                                option.customTextStyle,
                                                "",
                                              ),
                                            },
                                            React.createElement(
                                              "span",
                                              {
                                                className: selected
                                                  ? textColor.primaryNormal +
                                                    " font-semibold"
                                                  : "",
                                              },
                                              option.label,
                                            ),
                                          ),
                                        },
                                      ),
                                      tmp$1,
                                    ),
                                    React.createElement(RenderIf.make, {
                                      condition: selected,
                                      children: isCloseIcon
                                        ? React.createElement(Icon.make, {
                                            name: "close",
                                            size: 10,
                                            className: "text-red-500 mr-1",
                                          })
                                        : React.createElement(Tick.make, {
                                            isSelected: selected,
                                          }),
                                    }),
                                  );
                                },
                              },
                            );
                          });
                        },
                      }),
                      headerText: "Select Action",
                    })
                  : React.createElement(React$1.Menu.Items, {
                      className:
                        "absolute z-10 " +
                        dropdownPositionClass +
                        " mt-2 p-1 origin-top-right bg-white dark:bg-jp-gray-950 rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none " +
                        dropDownClass,
                      children: function (_props) {
                        return options.map(function (option, index) {
                          var selected;
                          selected =
                            value.TAG === "String"
                              ? value._0 === option.value
                              : value._0.includes(option.value);
                          var disabledClass = option.isDisabled
                            ? "disabled cursor-not-allowed"
                            : "";
                          return JsxPPXReactSupportU.createElementWithKey(
                            index.toString(),
                            React$1.Menu.Item,
                            {
                              children: function (props) {
                                var iconName = option.leftIcon;
                                var tmp;
                                if (typeof iconName !== "object") {
                                  tmp = null;
                                } else {
                                  switch (iconName.TAG) {
                                    case "FontAwesome":
                                      tmp = React.createElement(Icon.make, {
                                        name: iconName._0,
                                        size: 12,
                                        className:
                                          "align-middle " +
                                          Core__Option.getOr(
                                            option.customIconStyle,
                                            "",
                                          ),
                                      });
                                      break;
                                    case "CustomIcon":
                                      tmp = iconName._0;
                                      break;
                                    case "CustomRightIcon":
                                      tmp = null;
                                      break;
                                    case "Euler":
                                      tmp = React.createElement(Icon.make, {
                                        name: iconName._0,
                                        size: 12,
                                        className: "align-middle",
                                      });
                                      break;
                                  }
                                }
                                var iconName$1 = option.rightIcon;
                                var tmp$1;
                                if (typeof iconName$1 !== "object") {
                                  tmp$1 = null;
                                } else {
                                  switch (iconName$1.TAG) {
                                    case "FontAwesome":
                                      tmp$1 = React.createElement(Icon.make, {
                                        name: iconName$1._0,
                                        size: 12,
                                        className:
                                          "align-middle " +
                                          Core__Option.getOr(
                                            option.customIconStyle,
                                            "",
                                          ),
                                      });
                                      break;
                                    case "CustomIcon":
                                      tmp$1 = iconName$1._0;
                                      break;
                                    case "CustomRightIcon":
                                      tmp$1 = null;
                                      break;
                                    case "Euler":
                                      tmp$1 = React.createElement(Icon.make, {
                                        name: iconName$1._0,
                                        size: 12,
                                        className: "align-middle",
                                      });
                                      break;
                                  }
                                }
                                return React.createElement(
                                  "div",
                                  {
                                    className:
                                      "group flex flex-row items-center justify-between rounded-md w-full p-2 " +
                                      textClass +
                                      " cursor-pointer " +
                                      (props.active
                                        ? "bg-gray-100 dark:bg-gray-700"
                                        : "") +
                                      " " +
                                      disabledClass,
                                    disabled: option.isDisabled,
                                    onClick: function (ev) {
                                      if (!closeListOnClick) {
                                        ev.stopPropagation();
                                        ev.preventDefault();
                                      }
                                      setValue(option.value);
                                    },
                                  },
                                  React.createElement(
                                    "div",
                                    {
                                      className:
                                        "flex flex-row items-center gap-2",
                                    },
                                    tmp,
                                    React.createElement(
                                      AddDataAttributes.make,
                                      {
                                        attributes: [
                                          ["data-options", option.label],
                                        ],
                                        children: React.createElement(
                                          "div",
                                          {
                                            className: Core__Option.getOr(
                                              option.customTextStyle,
                                              "",
                                            ),
                                          },
                                          React.createElement(
                                            "span",
                                            {
                                              className: selected
                                                ? textColor.primaryNormal +
                                                  " font-semibold"
                                                : "",
                                            },
                                            option.label,
                                          ),
                                        ),
                                      },
                                    ),
                                    tmp$1,
                                  ),
                                  selected
                                    ? props.active && deSelectAllowed
                                      ? React.createElement(Icon.make, {
                                          name: "close",
                                          size: 10,
                                          className: "text-red-500 mr-1",
                                        })
                                      : React.createElement(Tick.make, {
                                          isSelected: selected,
                                        })
                                    : null,
                                );
                              },
                            },
                          );
                        });
                      },
                    }),
              ),
            }),
          );
        },
      }),
    }),
  );
}

var make = HeadlessUISelectBox;

export { make };
/* Icon Not a pure module */
