// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Icon from "./Icon.bs.js";
import * as React from "react";
import * as ToolTip from "./tooltip/ToolTip.bs.js";
import * as RenderIf from "../utils/RenderIf.bs.js";
import * as SelectBox from "./SelectBox.bs.js";
import * as Caml_int32 from "rescript/lib/es6/caml_int32.js";
import * as LogicUtils from "../utils/LogicUtils.bs.js";
import * as MatchMedia from "../context/MatchMedia.bs.js";
import * as TableUtils from "./TableUtils.bs.js";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Array from "@rescript/core/src/Core__Array.bs.js";
import * as CheckBoxIcon from "./custom-icons/CheckBoxIcon.bs.js";
import * as Core__Option from "@rescript/core/src/Core__Option.bs.js";
import * as AddDataAttributes from "./AddDataAttributes.bs.js";
import * as JsxPPXReactSupportU from "rescript/lib/es6/jsxPPXReactSupportU.js";
import * as DataTableFilterOpenContext from "../context/DataTableFilterOpenContext.bs.js";

function Table$TableFilterRow(props) {
  var tableDataBorderClass = props.tableDataBorderClass;
  var evenVertivalLines = props.evenVertivalLines;
  var removeHorizontalLines = props.removeHorizontalLines;
  var removeVerticalLines = props.removeVerticalLines;
  var item = props.item;
  var colsLen = item.length;
  var borderColor =
    "border-jp-gray-light_table_border_color dark:border-jp-gray-960";
  return React.createElement(
    "tr",
    {
      className:
        "filterColumns group rounded-md h-10 bg-white dark:bg-jp-gray-lightgray_background hover:bg-jp-gray-table_hover dark:hover:bg-jp-gray-table_hover_dark transition duration-300 ease-in-out text-fs-13 text-jp-gray-900 text-opacity-75 dark:text-jp-gray-text_darktheme dark:text-opacity-75 " +
        props.customFilterRowStyle,
    },
    props.showCheckbox ? React.createElement("td", undefined) : null,
    item.map(function (obj, cellIndex) {
      var isLast = cellIndex === ((colsLen - 1) | 0);
      var borderTop = "border-t";
      var borderClass =
        removeHorizontalLines && removeVerticalLines
          ? ""
          : isLast
            ? borderTop + " " + borderColor
            : removeVerticalLines || (evenVertivalLines && cellIndex % 2 === 0)
              ? borderTop + " " + borderColor
              : borderTop + " border-r " + borderColor;
      return React.createElement(
        "td",
        {
          key: cellIndex.toString(),
          className: "align-top " + borderClass + " " + tableDataBorderClass,
        },
        React.createElement(
          "div",
          {
            className: "box-border px-4 py-3",
          },
          React.createElement(TableUtils.TableFilterCell.make, {
            cell: obj,
          }),
        ),
      );
    }),
  );
}

var TableFilterRow = {
  make: Table$TableFilterRow,
};

function Table$TableRow(props) {
  var __customCellColor = props.customCellColor;
  var __alignCellContent = props.alignCellContent;
  var __fixLastCol = props.fixLastCol;
  var __lastColClass = props.lastColClass;
  var __selectedRowColor = props.selectedRowColor;
  var __ellipseClass = props.ellipseClass;
  var __customMoneyStyle = props.customMoneyStyle;
  var __isEllipsisTextRelative = props.isEllipsisTextRelative;
  var __labelMargin = props.labelMargin;
  var __isHighchartLegend = props.isHighchartLegend;
  var fixedWidthClass = props.fixedWidthClass;
  var __rowCustomClass = props.rowCustomClass;
  var __rowHeightClass = props.rowHeightClass;
  var __clearFormatting = props.clearFormatting;
  var highlightText = props.highlightText;
  var onMouseLeave = props.onMouseLeave;
  var onMouseEnter = props.onMouseEnter;
  var expandedRow = props.expandedRow;
  var __collapseTableRow = props.collapseTableRow;
  var __tableDataBorderClass = props.tableDataBorderClass;
  var highlightEnabledFieldsArray = props.highlightEnabledFieldsArray;
  var evenVertivalLines = props.evenVertivalLines;
  var removeHorizontalLines = props.removeHorizontalLines;
  var removeVerticalLines = props.removeVerticalLines;
  var onRowClickPresent = props.onRowClickPresent;
  var onRowDoubleClick = props.onRowDoubleClick;
  var onRowClick = props.onRowClick;
  var rowIndex = props.rowIndex;
  var item = props.item;
  var title = props.title;
  var tableDataBorderClass =
    __tableDataBorderClass !== undefined ? __tableDataBorderClass : "";
  var collapseTableRow =
    __collapseTableRow !== undefined ? __collapseTableRow : false;
  var clearFormatting =
    __clearFormatting !== undefined ? __clearFormatting : false;
  var rowHeightClass = __rowHeightClass !== undefined ? __rowHeightClass : "";
  var rowCustomClass = __rowCustomClass !== undefined ? __rowCustomClass : "";
  var isHighchartLegend =
    __isHighchartLegend !== undefined ? __isHighchartLegend : false;
  var labelMargin = __labelMargin !== undefined ? __labelMargin : "";
  var isEllipsisTextRelative =
    __isEllipsisTextRelative !== undefined ? __isEllipsisTextRelative : true;
  var customMoneyStyle =
    __customMoneyStyle !== undefined ? __customMoneyStyle : "";
  var ellipseClass = __ellipseClass !== undefined ? __ellipseClass : "";
  var selectedRowColor =
    __selectedRowColor !== undefined
      ? __selectedRowColor
      : "bg-white dark:bg-jp-gray-lightgray_background";
  var lastColClass = __lastColClass !== undefined ? __lastColClass : "";
  var fixLastCol = __fixLastCol !== undefined ? __fixLastCol : false;
  var alignCellContent =
    __alignCellContent !== undefined ? __alignCellContent : "";
  var customCellColor =
    __customCellColor !== undefined ? __customCellColor : "";
  var match = React.useState(function () {
    return false;
  });
  var setIsCurrentRowExpanded = match[1];
  var isCurrentRowExpanded = match[0];
  var match$1 = React.useState(function () {
    return null;
  });
  var setExpandedData = match$1[1];
  var actualIndex = (props.offset + rowIndex) | 0;
  var onClick = React.useCallback(
    function (_ev) {
      var isRangeSelected = window.getSelection().type === "Range";
      if (onRowClick !== undefined && !isRangeSelected) {
        return onRowClick(actualIndex);
      }
    },
    [onRowClick, actualIndex],
  );
  var onDoubleClick = React.useCallback(
    function (_ev) {
      if (onRowDoubleClick !== undefined) {
        return onRowDoubleClick(actualIndex);
      }
    },
    [onRowDoubleClick, actualIndex],
  );
  var onMouseEnter$1 = React.useCallback(
    function (_ev) {
      if (onMouseEnter !== undefined) {
        return onMouseEnter(actualIndex);
      }
    },
    [onMouseEnter, actualIndex],
  );
  var onMouseLeave$1 = React.useCallback(
    function (_ev) {
      if (onMouseLeave !== undefined) {
        return onMouseLeave(actualIndex);
      }
    },
    [onMouseLeave, actualIndex],
  );
  var colsLen = item.length;
  var cursorClass = onRowClickPresent ? "cursor-pointer" : "";
  var rowRef = React.useRef(null);
  var coloredRow = Core__Option.isSome(
    item.find(function (obj) {
      if (obj.TAG === "CustomCell") {
        return obj._1 === "true";
      } else {
        return false;
      }
    }),
  );
  var bgColor = coloredRow
    ? selectedRowColor
    : "bg-white dark:bg-jp-gray-lightgray_background";
  var hoverClass = onRowClickPresent
    ? "hover:bg-jp-gray-table_hover dark:hover:bg-jp-gray-table_hover_dark"
    : "";
  var tableBodyText = isHighchartLegend
    ? "group rounded-md " +
      cursorClass +
      " text-fs-10 font-medium dark:text-jp-gray-dark_chart_legend_text jp-gray-light_chart_legend_text pb-4 whitespace-nowrap text-ellipsis overflow-x-hidden"
    : "group rounded-md " +
      cursorClass +
      " " +
      bgColor +
      " text-fs-13  " +
      rowCustomClass +
      " text-jp-gray-900  dark:text-jp-gray-text_darktheme dark:text-opacity-75 " +
      hoverClass +
      " transition duration-300 ease-in-out";
  return React.createElement(
    React.Fragment,
    {},
    React.createElement(
      "tr",
      {
        ref: Caml_option.some(rowRef),
        className: tableBodyText,
        onClick: onClick,
        onDoubleClick: onDoubleClick,
        onMouseEnter: onMouseEnter$1,
        onMouseLeave: onMouseLeave$1,
      },
      item.map(function (obj, cellIndex) {
        var isLast = cellIndex === ((colsLen - 1) | 0);
        var showBorderTop;
        showBorderTop = obj.TAG === "Text" ? obj._0 !== "-" : true;
        var paddingClass;
        paddingClass = obj.TAG === "Link" ? "pt-2" : "py-3";
        var coloredRow;
        coloredRow = obj.TAG === "CustomCell" ? obj._1 === "true" : false;
        var customColorCell = coloredRow ? customCellColor : "";
        var highlightCell = highlightEnabledFieldsArray.includes(cellIndex);
        var highlightClass = highlightCell ? "hover:font-bold" : "";
        var borderColor =
          "border-jp-gray-light_table_border_color dark:border-jp-gray-960";
        var borderTop = showBorderTop ? "border-t" : "border-t-0";
        var borderClass =
          removeHorizontalLines && removeVerticalLines
            ? ""
            : isLast
              ? borderTop + " " + borderColor
              : removeVerticalLines ||
                  (evenVertivalLines && cellIndex % 2 === 0)
                ? borderTop + " " + borderColor
                : borderTop + " border-r " + borderColor;
        var cursorI =
          cellIndex === 0 && collapseTableRow ? "cursor-pointer" : "";
        var isLast$1 = cellIndex === ((colsLen - 1) | 0);
        var lastColProp =
          isLast$1 && fixLastCol
            ? "border-l h-full !py-0 flex flex-col justify-center"
            : "";
        var tableRowBorderClass = isHighchartLegend
          ? "align-top " +
            highlightClass +
            " " +
            tableDataBorderClass +
            " " +
            cursorI +
            " " +
            rowHeightClass
          : isLast$1
            ? "align-top " +
              lastColClass +
              " " +
              borderClass +
              " " +
              highlightClass +
              " " +
              tableDataBorderClass +
              " " +
              cursorI +
              " " +
              rowHeightClass
            : "align-top " +
              borderClass +
              " " +
              highlightClass +
              " " +
              tableDataBorderClass +
              " " +
              cursorI +
              " " +
              rowHeightClass;
        var paddingClass$1 = "px-4 " + paddingClass;
        var tableRowPaddingClass = isHighchartLegend
          ? "box-border py-1 " + lastColProp + " " + alignCellContent
          : "box-border " +
            paddingClass$1 +
            " " +
            lastColProp +
            " " +
            alignCellContent;
        var $$location =
          title +
          "_tr" +
          ((rowIndex + 1) | 0).toString() +
          "_td" +
          ((cellIndex + 1) | 0).toString();
        return JsxPPXReactSupportU.createElementWithKey(
          cellIndex.toString(),
          AddDataAttributes.make,
          {
            attributes: [["data-table-location", $$location]],
            children: React.createElement(
              "td",
              {
                key: cellIndex.toString(),
                className: tableRowBorderClass + " " + customColorCell,
                style: {
                  width: fixedWidthClass,
                },
                onClick: function (param) {
                  if (collapseTableRow && cellIndex === 0) {
                    setIsCurrentRowExpanded(function (prev) {
                      return !prev;
                    });
                    return setExpandedData(function (param) {
                      return expandedRow();
                    });
                  }
                },
              },
              React.createElement(
                "div",
                {
                  className: tableRowPaddingClass,
                },
                collapseTableRow
                  ? React.createElement(
                      "div",
                      {
                        className: "flex flex-row gap-4 items-center",
                      },
                      cellIndex === 0
                        ? React.createElement(Icon.make, {
                            name: isCurrentRowExpanded
                              ? "caret-down"
                              : "caret-right",
                            size: 14,
                          })
                        : null,
                      React.createElement(TableUtils.TableCell.make, {
                        cell: obj,
                        labelMargin: labelMargin,
                        customMoneyStyle: customMoneyStyle,
                        highlightText: highlightText,
                        clearFormatting: clearFormatting,
                        isEllipsisTextRelative: isEllipsisTextRelative,
                        ellipseClass: ellipseClass,
                      }),
                    )
                  : React.createElement(TableUtils.TableCell.make, {
                      cell: obj,
                      labelMargin: labelMargin,
                      customMoneyStyle: customMoneyStyle,
                      highlightText: highlightText,
                      clearFormatting: clearFormatting,
                      isEllipsisTextRelative: isEllipsisTextRelative,
                      ellipseClass: ellipseClass,
                    }),
              ),
            ),
          },
        );
      }),
    ),
    isCurrentRowExpanded
      ? React.createElement(
          "tr",
          {
            className: "dark:border-jp-gray-dark_disable_border_color",
          },
          React.createElement(
            "td",
            {
              className: "",
              colSpan: 12,
            },
            match$1[0],
          ),
        )
      : null,
  );
}

var TableRow = {
  make: Table$TableRow,
};

function Table$SortAction(props) {
  var setSortedObj = props.setSortedObj;
  var sortedObj = props.sortedObj;
  var item = props.item;
  if (!(item.showSort || Core__Option.isSome(props.filterRow))) {
    return null;
  }
  var order =
    sortedObj !== undefined && sortedObj.key === item.key
      ? sortedObj.order
      : "NONE";
  var handleSortClick = function (_ev) {
    if (setSortedObj !== undefined) {
      return setSortedObj(function (param) {
        return {
          key: item.key,
          order: order === "DEC" ? "INC" : "DEC",
        };
      });
    }
  };
  return React.createElement(AddDataAttributes.make, {
    attributes: [["data-table", "tableSort"]],
    children: React.createElement(
      "div",
      {
        className: "cursor-pointer text-gray-300 pl-4",
        onClick: handleSortClick,
      },
      React.createElement(TableUtils.SortIcons.make, {
        order: order,
        size: props.sortIconSize,
      }),
    ),
  });
}

var SortAction = {
  make: Table$SortAction,
};

function Table$TableHeadingCell(props) {
  var __tableHeadingTextClass = props.tableHeadingTextClass;
  var customizeColumnNewTheme = props.customizeColumnNewTheme;
  var filterRow = props.filterRow;
  var headerCustomBgColor = props.headerCustomBgColor;
  var __fixLastCol = props.fixLastCol;
  var __lastHeadingClass = props.lastHeadingClass;
  var __isFrozen = props.isFrozen;
  var setSelectAllCheckBox = props.setSelectAllCheckBox;
  var selectAllCheckBox = props.selectAllCheckBox;
  var filterDropdownClass = props.filterDropdownClass;
  var filterIcon = props.filterIcon;
  var setFilterObj = props.setFilterObj;
  var filterObj = props.filterObj;
  var isHighchartLegend = props.isHighchartLegend;
  var index = props.index;
  var item = props.item;
  var isFrozen = __isFrozen !== undefined ? __isFrozen : false;
  var lastHeadingClass =
    __lastHeadingClass !== undefined ? __lastHeadingClass : "";
  var fixLastCol = __fixLastCol !== undefined ? __fixLastCol : false;
  var tableHeadingTextClass =
    __tableHeadingTextClass !== undefined ? __tableHeadingTextClass : "";
  var isFirstCol = index === 0;
  var isLastCol = index === ((props.headingArray.length - 1) | 0);
  var setIsSelected = function (isAllSelected) {
    if (setSelectAllCheckBox !== undefined) {
      return setSelectAllCheckBox(function (param) {
        if (isAllSelected) {
          return "ALL";
        }
      });
    }
  };
  var headerBgColor = Core__Option.isSome(headerCustomBgColor)
    ? Core__Option.getOr(headerCustomBgColor, "")
    : "bg-offset_white dark:bg-jp-gray-darkgray_background";
  var roundedClass = isFirstCol ? "rounded-tl" : isLastCol ? "rounded-tr" : "";
  var lastColProp =
    isLastCol && fixLastCol ? "sticky right-0 !px-0 !py-0 z-20" : "";
  var borderlastCol =
    isLastCol && fixLastCol
      ? "border-l px-4 py-3 h-full justify-center !flex-col"
      : "";
  var tableHeaderClass;
  if (isHighchartLegend) {
    tableHeaderClass =
      "tableHeader " +
      lastColProp +
      " p-0 pb-2 justify-between items-center dark:text-jp-gray-dark_chart_legend_text jp-gray-light_chart_legend_text text-opacity-75 dark:text-opacity-75 whitespace-pre select-none " +
      (isLastCol ? lastHeadingClass : "");
  } else {
    var heightHeadingClass2 =
      props.frozenUpto === 0 ? "" : props.heightHeadingClass;
    tableHeaderClass =
      "tableHeader " +
      lastColProp +
      " " +
      Core__Option.getOr(item.customWidth, "") +
      " justify-between items-center text-jp-gray-900 text-opacity-75 dark:text-jp-gray-text_darktheme dark:text-opacity-75 whitespace-pre select-none " +
      headerBgColor +
      " px-4 py-3 " +
      roundedClass +
      " " +
      heightHeadingClass2 +
      " " +
      props.tableheadingClass +
      " " +
      (isLastCol ? lastHeadingClass : "");
  }
  var tableHeadingTextClass$1 = isHighchartLegend
    ? "text-fs-11 dark:text-blue-300 text-jp-gray-900 text-opacity-80 dark:text-opacity-100 font-medium not-italic whitespace-nowrap text-ellipsis overflow-x-hidden "
    : "font-bold text-fs-13 " + tableHeadingTextClass;
  var isAllSelected = Core__Option.isSome(selectAllCheckBox);
  var isSelectedStateMinus = selectAllCheckBox === "PARTIAL";
  var sortIconSize = isHighchartLegend ? 11 : 13;
  var tmp;
  if (customizeColumnNewTheme !== undefined) {
    tmp = React.createElement(
      "div",
      {
        className: "flex flex-row justify-center items-center",
      },
      customizeColumnNewTheme.customizeColumnUi,
    );
  } else {
    var headerElement = item.headerElement;
    var tmp$1;
    if (item.showFilter || item.showSort || Core__Option.isSome(filterRow)) {
      var tmp$2;
      if (item.showFilter) {
        var match;
        if (filterObj !== undefined) {
          var ele = filterObj[index];
          match = ele !== undefined ? [ele.options, ele.selected] : [[], []];
        } else {
          match = [[], []];
        }
        var options = match[0];
        if (options.length > 1) {
          var filterInput_onBlur = function (_ev) {};
          var filterInput_onChange = function (ev) {
            if (setFilterObj !== undefined) {
              return setFilterObj(function (prevFilterObj) {
                return prevFilterObj.map(function (obj) {
                  if (obj.key === index.toString()) {
                    return {
                      key: index.toString(),
                      options: obj.options,
                      selected: ev,
                    };
                  } else {
                    return obj;
                  }
                });
              });
            }
          };
          var filterInput_onFocus = function (_ev) {};
          var filterInput_value = match[1].map(function (prim) {
            return prim;
          });
          var filterInput = {
            name: "filterInput",
            onBlur: filterInput_onBlur,
            onChange: filterInput_onChange,
            onFocus: filterInput_onFocus,
            value: filterInput_value,
            checked: true,
          };
          var icon =
            filterIcon !== undefined
              ? Caml_option.valFromOption(filterIcon)
              : React.createElement(Icon.make, {
                  name: "filter",
                  size: 12,
                  className: "align-middle text-gray-400",
                });
          var dropdownClass =
            filterDropdownClass !== undefined ? filterDropdownClass : "";
          tmp$2 = React.createElement(
            "div",
            {
              className: dropdownClass,
            },
            React.createElement(SelectBox.BaseDropdown.make, {
              buttonText: "",
              allowMultiSelect: true,
              input: filterInput,
              options: SelectBox.makeOptions(options),
              hideMultiSelectButtons: true,
              deselectDisable: false,
              baseComponent: Caml_option.some(icon),
              autoApply: false,
              maxHeight: props.filterDropdownMaxHeight,
            }),
          );
        } else {
          tmp$2 = null;
        }
      } else {
        tmp$2 = null;
      }
      tmp$1 = React.createElement(
        "div",
        {
          className: "flex flex-row self-end items-center",
        },
        React.createElement(Table$SortAction, {
          item: item,
          sortedObj: props.sortedObj,
          setSortedObj: props.setSortedObj,
          sortIconSize: sortIconSize,
          isLastCol: isLastCol && !isFrozen && !isFirstCol,
          filterRow: filterRow,
        }),
        tmp$2,
      );
    } else {
      tmp$1 = null;
    }
    tmp = React.createElement(
      "div",
      {
        className:
          "flex flex-row " +
          borderlastCol +
          "  " +
          (props.headingCenter ? "justify-center" : ""),
      },
      React.createElement(
        "div",
        {
          className: "",
        },
        React.createElement(
          "div",
          {
            className: "flex flex-row",
          },
          React.createElement(RenderIf.make, {
            condition: Core__Option.getOr(item.showMultiSelectCheckBox, false),
            children: React.createElement(
              "div",
              {
                className: " mt-1 mr-2",
              },
              React.createElement(CheckBoxIcon.make, {
                isSelected: isAllSelected,
                setIsSelected: setIsSelected,
                isSelectedStateMinus: isSelectedStateMinus,
                checkboxDimension: "h-4 w-4",
              }),
            ),
          }),
          React.createElement(
            "div",
            {
              className: "flex justify-between items-center",
            },
            headerElement !== undefined
              ? Caml_option.valFromOption(headerElement)
              : React.createElement(
                  "div",
                  {
                    className: tableHeadingTextClass$1,
                  },
                  item.title,
                ),
            React.createElement(RenderIf.make, {
              condition: Core__Option.isSome(item.data),
              children: React.createElement(AddDataAttributes.make, {
                attributes: [
                  ["data-heading-value", Core__Option.getOr(item.data, "")],
                ],
                children: React.createElement(
                  "div",
                  {
                    className:
                      "flex justify-start text-fs-10 font-medium text-gray-400 whitespace-pre text-ellipsis overflow-x-hidden",
                  },
                  " (" + Core__Option.getOr(item.data, "") + ")",
                ),
              }),
            }),
            tmp$1,
          ),
          React.createElement(RenderIf.make, {
            condition: Core__Option.getOr(item.isMandatory, false),
            children: React.createElement(
              "div",
              {
                className: "text-red-400 text-sm ml-1",
              },
              "*",
            ),
          }),
          React.createElement(RenderIf.make, {
            condition: LogicUtils.isNonEmptyString(
              Core__Option.getOr(item.description, ""),
            ),
            children: React.createElement(
              "div",
              {
                className: "text-sm text-gray-500 mx-2",
              },
              React.createElement(ToolTip.make, {
                description: Core__Option.getOr(item.description, ""),
                toolTipPosition: "Bottom",
              }),
            ),
          }),
        ),
      ),
    );
  }
  return React.createElement(AddDataAttributes.make, {
    attributes: [["data-table-heading", item.title]],
    children: React.createElement(
      "th",
      {
        key: index.toString(),
        className: tableHeaderClass,
        style: {
          width: props.fixedWidthClass,
        },
      },
      tmp,
    ),
  });
}

var TableHeadingCell = {
  make: Table$TableHeadingCell,
};

function Table$TableHeadingRow(props) {
  var __tableHeadingTextClass = props.tableHeadingTextClass;
  var customizeColumnNewTheme = props.customizeColumnNewTheme;
  var columnFilterRow = props.columnFilterRow;
  var filterDropdownMaxHeight = props.filterDropdownMaxHeight;
  var headerCustomBgColor = props.headerCustomBgColor;
  var __fixLastCol = props.fixLastCol;
  var __lastHeadingClass = props.lastHeadingClass;
  var __isFrozen = props.isFrozen;
  var setSelectAllCheckBox = props.setSelectAllCheckBox;
  var selectAllCheckBox = props.selectAllCheckBox;
  var filterDropdownClass = props.filterDropdownClass;
  var filterIcon = props.filterIcon;
  var headingCenter = props.headingCenter;
  var setFilterObj = props.setFilterObj;
  var fixedWidthClass = props.fixedWidthClass;
  var filterObj = props.filterObj;
  var setSortedObj = props.setSortedObj;
  var sortedObj = props.sortedObj;
  var tableheadingClass = props.tableheadingClass;
  var heightHeadingClass = props.heightHeadingClass;
  var frozenUpto = props.frozenUpto;
  var isHighchartLegend = props.isHighchartLegend;
  var headingArray = props.headingArray;
  var isFrozen = __isFrozen !== undefined ? __isFrozen : false;
  var lastHeadingClass =
    __lastHeadingClass !== undefined ? __lastHeadingClass : "";
  var fixLastCol = __fixLastCol !== undefined ? __fixLastCol : false;
  var tableHeadingTextClass =
    __tableHeadingTextClass !== undefined ? __tableHeadingTextClass : "";
  if (headingArray.length !== 0) {
    return React.createElement(
      "thead",
      undefined,
      React.createElement(
        "tr",
        undefined,
        headingArray.map(function (item, i) {
          var columnFilterRow$1 = Core__Option.getOr(columnFilterRow, []);
          var filterRow = columnFilterRow$1[i];
          return JsxPPXReactSupportU.createElementWithKey(
            i.toString(),
            Table$TableHeadingCell,
            {
              item: item,
              index: i,
              headingArray: headingArray,
              isHighchartLegend: isHighchartLegend,
              frozenUpto: frozenUpto,
              heightHeadingClass: heightHeadingClass,
              tableheadingClass: tableheadingClass,
              sortedObj: sortedObj,
              setSortedObj: setSortedObj,
              filterObj: filterObj,
              fixedWidthClass: fixedWidthClass,
              setFilterObj: setFilterObj,
              headingCenter: headingCenter,
              filterIcon: filterIcon,
              filterDropdownClass: filterDropdownClass,
              filterDropdownMaxHeight: filterDropdownMaxHeight,
              selectAllCheckBox: selectAllCheckBox,
              setSelectAllCheckBox: setSelectAllCheckBox,
              isFrozen: isFrozen,
              lastHeadingClass: lastHeadingClass,
              fixLastCol: fixLastCol,
              headerCustomBgColor: headerCustomBgColor,
              filterRow: filterRow,
              customizeColumnNewTheme: customizeColumnNewTheme,
              tableHeadingTextClass: tableHeadingTextClass,
            },
          );
        }),
      ),
    );
  } else {
    return null;
  }
}

var TableHeadingRow = {
  make: Table$TableHeadingRow,
};

function Table(props) {
  var __tableHeadingTextClass = props.tableHeadingTextClass;
  var __showborderColor = props.showborderColor;
  var customCellColor = props.customCellColor;
  var customizeColumnNewTheme = props.customizeColumnNewTheme;
  var filterDropdownMaxHeight = props.filterDropdownMaxHeight;
  var __minTableHeightClass = props.minTableHeightClass;
  var alignCellContent = props.alignCellContent;
  var headerCustomBgColor = props.headerCustomBgColor;
  var __fixLastCol = props.fixLastCol;
  var __lastColClass = props.lastColClass;
  var __showCheckbox = props.showCheckbox;
  var __lastHeadingClass = props.lastHeadingClass;
  var selectedRowColor = props.selectedRowColor;
  var __ellipseClass = props.ellipseClass;
  var __customMoneyStyle = props.customMoneyStyle;
  var __isEllipsisTextRelative = props.isEllipsisTextRelative;
  var setSelectAllCheckBox = props.setSelectAllCheckBox;
  var selectAllCheckBox = props.selectAllCheckBox;
  var __customFilterRowStyle = props.customFilterRowStyle;
  var __labelMargin = props.labelMargin;
  var __maxTableHeight = props.maxTableHeight;
  var __showHeading = props.showHeading;
  var filterDropdownClass = props.filterDropdownClass;
  var filterIcon = props.filterIcon;
  var __headingCenter = props.headingCenter;
  var __isHighchartLegend = props.isHighchartLegend;
  var __enableEqualWidthCol = props.enableEqualWidthCol;
  var __rowCustomClass = props.rowCustomClass;
  var __isMinHeightRequired = props.isMinHeightRequired;
  var __rowHeightClass = props.rowHeightClass;
  var __clearFormatting = props.clearFormatting;
  var __frozenUpto = props.frozenUpto;
  var __heightHeadingClass = props.heightHeadingClass;
  var __highlightText = props.highlightText;
  var onMouseLeave = props.onMouseLeave;
  var onMouseEnter = props.onMouseEnter;
  var actualData = props.actualData;
  var getRowDetails = props.getRowDetails;
  var __collapseTableRow = props.collapseTableRow;
  var __tableDataBorderClass = props.tableDataBorderClass;
  var __tableBorderClass = props.tableBorderClass;
  var __tableheadingClass = props.tableheadingClass;
  var columnFilterRow = props.columnFilterRow;
  var filterObj = props.filterObj;
  var setFilterObj = props.setFilterObj;
  var sortedObj = props.sortedObj;
  var setSortedObj = props.setSortedObj;
  var __showScrollBar = props.showScrollBar;
  var __evenVertivalLines = props.evenVertivalLines;
  var __removeHorizontalLines = props.removeHorizontalLines;
  var __removeVerticalLines = props.removeVerticalLines;
  var __fullWidth = props.fullWidth;
  var __onRowClickPresent = props.onRowClickPresent;
  var onRowDoubleClick = props.onRowDoubleClick;
  var onRowClick = props.onRowClick;
  var __offset = props.offset;
  var rows = props.rows;
  var __heading = props.heading;
  var __title = props.title;
  var title = __title !== undefined ? __title : "Title";
  var heading = __heading !== undefined ? __heading : [];
  var offset = __offset !== undefined ? __offset : 0;
  var onRowClickPresent =
    __onRowClickPresent !== undefined ? __onRowClickPresent : false;
  var fullWidth = __fullWidth !== undefined ? __fullWidth : true;
  var removeVerticalLines =
    __removeVerticalLines !== undefined ? __removeVerticalLines : true;
  var removeHorizontalLines =
    __removeHorizontalLines !== undefined ? __removeHorizontalLines : false;
  var evenVertivalLines =
    __evenVertivalLines !== undefined ? __evenVertivalLines : false;
  var showScrollBar = __showScrollBar !== undefined ? __showScrollBar : false;
  var tableheadingClass =
    __tableheadingClass !== undefined ? __tableheadingClass : "";
  var tableBorderClass =
    __tableBorderClass !== undefined ? __tableBorderClass : "";
  var tableDataBorderClass =
    __tableDataBorderClass !== undefined ? __tableDataBorderClass : "";
  var collapseTableRow =
    __collapseTableRow !== undefined ? __collapseTableRow : false;
  var highlightText = __highlightText !== undefined ? __highlightText : "";
  var heightHeadingClass =
    __heightHeadingClass !== undefined ? __heightHeadingClass : "h-16";
  var frozenUpto = __frozenUpto !== undefined ? __frozenUpto : 0;
  var clearFormatting =
    __clearFormatting !== undefined ? __clearFormatting : false;
  var rowHeightClass = __rowHeightClass !== undefined ? __rowHeightClass : "";
  var isMinHeightRequired =
    __isMinHeightRequired !== undefined ? __isMinHeightRequired : false;
  var rowCustomClass = __rowCustomClass !== undefined ? __rowCustomClass : "";
  var enableEqualWidthCol =
    __enableEqualWidthCol !== undefined ? __enableEqualWidthCol : false;
  var isHighchartLegend =
    __isHighchartLegend !== undefined ? __isHighchartLegend : false;
  var headingCenter = __headingCenter !== undefined ? __headingCenter : false;
  var showHeading = __showHeading !== undefined ? __showHeading : true;
  var maxTableHeight = __maxTableHeight !== undefined ? __maxTableHeight : "";
  var labelMargin = __labelMargin !== undefined ? __labelMargin : "";
  var customFilterRowStyle =
    __customFilterRowStyle !== undefined ? __customFilterRowStyle : "";
  var isEllipsisTextRelative =
    __isEllipsisTextRelative !== undefined ? __isEllipsisTextRelative : true;
  var customMoneyStyle =
    __customMoneyStyle !== undefined ? __customMoneyStyle : "";
  var ellipseClass = __ellipseClass !== undefined ? __ellipseClass : "";
  var lastHeadingClass =
    __lastHeadingClass !== undefined ? __lastHeadingClass : "";
  var showCheckbox = __showCheckbox !== undefined ? __showCheckbox : false;
  var lastColClass = __lastColClass !== undefined ? __lastColClass : "";
  var fixLastCol = __fixLastCol !== undefined ? __fixLastCol : false;
  var minTableHeightClass =
    __minTableHeightClass !== undefined ? __minTableHeightClass : "";
  var showborderColor =
    __showborderColor !== undefined ? __showborderColor : true;
  var tableHeadingTextClass =
    __tableHeadingTextClass !== undefined ? __tableHeadingTextClass : "";
  var isMobileView = MatchMedia.useMobileChecker();
  var numberOfCols = heading.length;
  var totalTableWidth = Core__Option.mapOr(
    Caml_option.nullable_to_opt(document.getElementById("table")),
    0,
    function (ele) {
      return ele.offsetWidth;
    },
  );
  var equalColWidth = Caml_int32.div(totalTableWidth, numberOfCols).toString();
  var fixedWidthClass = enableEqualWidthCol ? equalColWidth + "px" : "";
  var widthClass = fullWidth ? "min-w-full" : "";
  var scrollBarClass = showScrollBar ? "show-scrollbar" : "";
  var filterPresent = Core__Option.isSome(
    heading.find(function (head) {
      return head.showFilter;
    }),
  );
  var highlightEnabledFieldsArray = Core__Array.reduceWithIndex(
    heading,
    [],
    function (acc, item, index) {
      if (item.highlightCellOnHover) {
        acc.push(index);
      }
      return acc;
    },
  );
  var tableRows = function (rowArr, isCustomiseColumn) {
    return rowArr.map(function (item, rowIndex) {
      return JsxPPXReactSupportU.createElementWithKey(
        ((offset + rowIndex) | 0).toString(),
        Table$TableRow,
        {
          title: title,
          item: item,
          rowIndex: rowIndex,
          onRowClick: onRowClick,
          onRowDoubleClick: onRowDoubleClick,
          onRowClickPresent: onRowClickPresent,
          offset: offset,
          removeVerticalLines: removeVerticalLines,
          removeHorizontalLines: removeHorizontalLines,
          evenVertivalLines: evenVertivalLines,
          highlightEnabledFieldsArray: highlightEnabledFieldsArray,
          tableDataBorderClass: tableDataBorderClass,
          collapseTableRow: collapseTableRow,
          expandedRow: function () {
            var rowIndex$1 = (offset + rowIndex) | 0;
            if (actualData !== undefined && getRowDetails !== undefined) {
              return getRowDetails(
                Core__Option.getOr(actualData[rowIndex$1], null),
              );
            } else {
              return null;
            }
          },
          onMouseEnter: onMouseEnter,
          onMouseLeave: onMouseLeave,
          highlightText: highlightText,
          clearFormatting: clearFormatting,
          rowHeightClass: rowHeightClass,
          rowCustomClass:
            rowCustomClass + " " + (isCustomiseColumn ? "opacity-0" : ""),
          fixedWidthClass: fixedWidthClass,
          isHighchartLegend: isHighchartLegend,
          labelMargin: labelMargin,
          isEllipsisTextRelative: isEllipsisTextRelative,
          customMoneyStyle: customMoneyStyle,
          ellipseClass: ellipseClass,
          selectedRowColor: selectedRowColor,
          lastColClass: lastColClass,
          fixLastCol: fixLastCol,
          alignCellContent: alignCellContent,
          customCellColor: customCellColor,
        },
      );
    });
  };
  var renderTableHeadingRow = function (
    headingArray,
    isFrozen,
    isCustomiseColumn,
    lastHeadingClass,
  ) {
    var columnFilterRow$1 =
      columnFilterRow !== undefined
        ? isFrozen
          ? columnFilterRow.slice(0, frozenUpto)
          : columnFilterRow.slice(frozenUpto)
        : undefined;
    var tableheadingClass$1 = Core__Option.isSome(customizeColumnNewTheme)
      ? tableheadingClass + " " + heightHeadingClass
      : tableheadingClass;
    var customizeColumnNewTheme$1 = isCustomiseColumn
      ? customizeColumnNewTheme
      : undefined;
    return React.createElement(Table$TableHeadingRow, {
      headingArray: headingArray,
      isHighchartLegend: isHighchartLegend,
      frozenUpto: frozenUpto,
      heightHeadingClass: heightHeadingClass,
      tableheadingClass: tableheadingClass$1,
      sortedObj: sortedObj,
      setSortedObj: setSortedObj,
      filterObj: filterObj,
      fixedWidthClass: fixedWidthClass,
      setFilterObj: setFilterObj,
      headingCenter: headingCenter,
      filterIcon: filterIcon,
      filterDropdownClass: filterDropdownClass,
      selectAllCheckBox: selectAllCheckBox,
      setSelectAllCheckBox: setSelectAllCheckBox,
      isFrozen: isFrozen,
      lastHeadingClass: lastHeadingClass,
      fixLastCol: fixLastCol,
      headerCustomBgColor: headerCustomBgColor,
      filterDropdownMaxHeight: filterDropdownMaxHeight,
      columnFilterRow: columnFilterRow$1,
      customizeColumnNewTheme: customizeColumnNewTheme$1,
      tableHeadingTextClass: tableHeadingTextClass,
    });
  };
  var tableFilterRow = function (isFrozen) {
    if (columnFilterRow === undefined) {
      return null;
    }
    var filterRows = isFrozen
      ? columnFilterRow.slice(0, frozenUpto)
      : columnFilterRow.slice(frozenUpto);
    return React.createElement(Table$TableFilterRow, {
      item: filterRows,
      removeVerticalLines: removeVerticalLines,
      removeHorizontalLines: removeHorizontalLines,
      evenVertivalLines: evenVertivalLines,
      tableDataBorderClass: tableDataBorderClass,
      customFilterRowStyle: customFilterRowStyle,
      showCheckbox: showCheckbox,
    });
  };
  var frozenHeading = heading.slice(0, frozenUpto);
  var frozenCustomiseColumnHeading = [
    TableUtils.makeHeaderInfo(
      "",
      "Customize Column",
      undefined,
      undefined,
      undefined,
      undefined,
      undefined,
      undefined,
      undefined,
      undefined,
      true,
      undefined,
      undefined,
      undefined,
    ),
  ];
  var frozenRow = rows.map(function (row) {
    return row.slice(0, frozenUpto);
  });
  var remainingHeading = heading.slice(frozenUpto);
  var remaingRow = rows.map(function (row) {
    return row.slice(frozenUpto);
  });
  var frozenTableWidthClass = isMobileView ? "w-48" : "w-auto";
  var boderColor = showborderColor
    ? "border border-jp-gray-940 border-opacity-50 dark:border-jp-gray-960"
    : "";
  var frozenTable = React.createElement(
    "table",
    {
      className:
        "table-auto " +
        frozenTableWidthClass +
        " border border-jp-gray-940 border-opacity-100 dark:border-jp-gray-960 rounded-lg " +
        tableBorderClass +
        " sticky left-0 z-10",
    },
    React.createElement(RenderIf.make, {
      condition: showHeading,
      children: renderTableHeadingRow(
        frozenHeading,
        true,
        false,
        lastHeadingClass,
      ),
    }),
    React.createElement(
      "tbody",
      undefined,
      tableFilterRow(true),
      tableRows(frozenRow, false),
    ),
  );
  var totalLength = rows.length;
  var customizeColumn = React.createElement(
    "table",
    {
      className: "table-auto rounded-lg sticky right-0 !px-0 !py-0 z-10",
    },
    React.createElement(RenderIf.make, {
      condition: showHeading,
      children: renderTableHeadingRow(
        frozenCustomiseColumnHeading,
        true,
        true,
        lastHeadingClass + " rounded-tl-none rounded-tr-lg",
      ),
    }),
    React.createElement(
      "tbody",
      undefined,
      tableRows(
        Core__Array.fromInitializer(totalLength, function (i) {
          return (i + 1) | 0;
        }).map(function (param) {
          return [
            {
              TAG: "Text",
              _0: "",
            },
          ];
        }),
        true,
      ),
    ),
  );
  var tableBorderClass$1 = isHighchartLegend
    ? "table-auto " + widthClass
    : "table-auto " +
      widthClass +
      " " +
      tableBorderClass +
      " " +
      boderColor +
      " rounded-lg";
  var match = React.useContext(DataTableFilterOpenContext.filterOpenContext);
  var nonFrozenTable = React.createElement(
    "table",
    {
      className: tableBorderClass$1,
      id: "table",
    },
    React.createElement(RenderIf.make, {
      condition: showHeading,
      children: renderTableHeadingRow(
        remainingHeading,
        false,
        false,
        lastHeadingClass,
      ),
    }),
    React.createElement(
      "tbody",
      undefined,
      tableFilterRow(false),
      tableRows(remaingRow, false),
    ),
  );
  var parentMinWidthClass = frozenUpto > 0 ? "min-w-max" : "";
  var childMinWidthClass = frozenUpto > 0 ? "" : "min-w-full";
  var overflowClass =
    Core__Array.reduce(Object.values(match[0]), false, function (acc, item) {
      if (item) {
        return true;
      } else {
        return acc;
      }
    }) || isMinHeightRequired
      ? ""
      : "overflow-scroll";
  var parentBorderRadius = isHighchartLegend ? "" : "rounded-t-lg";
  var parentBorderClass = isHighchartLegend
    ? ""
    : "border border-jp-2-light-gray-300";
  return React.createElement(
    "div",
    {
      className:
        "flex flex-row items-stretch " +
        scrollBarClass +
        " loadedTable " +
        parentMinWidthClass +
        " " +
        Core__Option.getOr(
          props.customBorderClass,
          parentBorderClass + " " + parentBorderRadius,
        ),
      style: {
        maxHeight: maxTableHeight,
        minHeight: LogicUtils.isNonEmptyString(minTableHeightClass)
          ? minTableHeightClass
          : filterPresent || isMinHeightRequired
            ? "25rem"
            : "",
      },
    },
    React.createElement(RenderIf.make, {
      condition: frozenUpto > 0,
      children: frozenTable,
    }),
    React.createElement(
      "div",
      {
        className:
          "flex-1 " + overflowClass + " no-scrollbar " + childMinWidthClass,
      },
      nonFrozenTable,
    ),
    customizeColumnNewTheme !== undefined
      ? React.createElement(RenderIf.make, {
          condition: customizeColumnNewTheme.customizeColumnUi !== null,
          children: customizeColumn,
        })
      : null,
  );
}

var regex = TableUtils.regex;

var highlightedText = TableUtils.highlightedText;

var getSortOrderString = TableUtils.getSortOrderString;

var makeHeaderInfo = TableUtils.makeHeaderInfo;

var getCell = TableUtils.getCell;

var ProgressCell = TableUtils.ProgressCell;

var getTextAlignmentClass = TableUtils.getTextAlignmentClass;

var BaseComponentMethod = TableUtils.BaseComponentMethod;

var LabelCell = TableUtils.LabelCell;

var NewLabelCell = TableUtils.NewLabelCell;

var ColoredTextCell = TableUtils.ColoredTextCell;

var Numeric = TableUtils.Numeric;

var MoneyCell = TableUtils.MoneyCell;

var LinkCell = TableUtils.LinkCell;

var DateCell = TableUtils.DateCell;

var StartEndDateCell = TableUtils.StartEndDateCell;

var EllipsisText = TableUtils.EllipsisText;

var TrimmedText = TableUtils.TrimmedText;

var TableFilterCell = TableUtils.TableFilterCell;

var DeltaColumn = TableUtils.DeltaColumn;

var TableCell = TableUtils.TableCell;

var NewTableCell = TableUtils.NewTableCell;

var getTableCellValue = TableUtils.getTableCellValue;

var SortIcons = TableUtils.SortIcons;

var HeaderActions = TableUtils.HeaderActions;

var make = Table;

export {
  regex,
  highlightedText,
  getSortOrderString,
  makeHeaderInfo,
  getCell,
  ProgressCell,
  getTextAlignmentClass,
  BaseComponentMethod,
  LabelCell,
  NewLabelCell,
  ColoredTextCell,
  Numeric,
  MoneyCell,
  LinkCell,
  DateCell,
  StartEndDateCell,
  EllipsisText,
  TrimmedText,
  TableFilterCell,
  DeltaColumn,
  TableCell,
  NewTableCell,
  getTableCellValue,
  SortIcons,
  HeaderActions,
  TableFilterRow,
  TableRow,
  SortAction,
  TableHeadingCell,
  TableHeadingRow,
  make,
};
/* Icon Not a pure module */
